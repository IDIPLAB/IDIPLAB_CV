

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>imgaug.parameters &mdash; imgaug 0.2.6 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> imgaug
          

          
          </a>

          
            
            
              <div class="version">
                0.2.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../source/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source/examples_basics.html">Examples: Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source/examples_keypoints.html">Examples: Keypoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source/examples_bounding_boxes.html">Examples: Bounding Boxes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source/parameters.html">Stochastic Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source/alpha.html">Blending/Overlaying images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source/augmenters.html">Overview of Augmenters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source/modules.html">imgaug</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">imgaug</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>imgaug.parameters</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for imgaug.parameters</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">imgaug</span> <span class="k">as</span> <span class="n">ia</span>
<span class="kn">from</span> <span class="nn">.external.opensimplex</span> <span class="k">import</span> <span class="n">OpenSimplex</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="k">import</span> <span class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">copy</span> <span class="k">as</span> <span class="nn">copy_module</span>
<span class="kn">import</span> <span class="nn">six</span>
<span class="kn">import</span> <span class="nn">six.moves</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">import</span> <span class="nn">scipy</span>
<span class="kn">import</span> <span class="nn">numbers</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="k">import</span> <span class="n">misc</span>

<span class="n">NP_FLOAT_TYPES</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sctypes</span><span class="p">[</span><span class="s2">&quot;float&quot;</span><span class="p">])</span>

<div class="viewcode-block" id="handle_continuous_param"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.handle_continuous_param">[docs]</a><span class="k">def</span> <span class="nf">handle_continuous_param</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tuple_to_uniform</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">list_to_choice</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">check_value_range</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value_range</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_range</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">value_range</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">v</span> <span class="o">&lt;=</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;Parameter &#39;</span><span class="si">%s</span><span class="s2">&#39; is outside of the expected value range (x &lt;= </span><span class="si">%.4f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">v</span><span class="p">,</span> <span class="s2">&quot;Parameter &#39;</span><span class="si">%s</span><span class="s2">&#39; is outside of the expected value range (</span><span class="si">%.4f</span><span class="s2"> &lt;= x)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;Parameter &#39;</span><span class="si">%s</span><span class="s2">&#39; is outside of the expected value range (</span><span class="si">%.4f</span><span class="s2"> &lt;= x &lt;= </span><span class="si">%.4f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_callable</span><span class="p">(</span><span class="n">value_range</span><span class="p">):</span>
            <span class="n">value_range</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Unexpected input for value_range, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value_range</span><span class="p">),))</span>

    <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">param</span><span class="p">):</span>
        <span class="n">check_value_range</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Deterministic</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">tuple_to_uniform</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">check_value_range</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">check_value_range</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">Uniform</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">list_to_choice</span> <span class="ow">and</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">param_i</span> <span class="ow">in</span> <span class="n">param</span><span class="p">:</span>
            <span class="n">check_value_range</span><span class="p">(</span><span class="n">param_i</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Choice</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">param</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected number, tuple of two number, list of number or StochasticParameter for </span><span class="si">%s</span><span class="s2">, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">param</span><span class="p">),))</span></div>

<div class="viewcode-block" id="handle_discrete_param"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.handle_discrete_param">[docs]</a><span class="k">def</span> <span class="nf">handle_discrete_param</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tuple_to_uniform</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">list_to_choice</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">allow_floats</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">check_value_range</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value_range</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_range</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">value_range</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">v</span> <span class="o">&lt;=</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;Parameter &#39;</span><span class="si">%s</span><span class="s2">&#39; is outside of the expected value range (x &lt;= </span><span class="si">%.4f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">v</span><span class="p">,</span> <span class="s2">&quot;Parameter &#39;</span><span class="si">%s</span><span class="s2">&#39; is outside of the expected value range (</span><span class="si">%.4f</span><span class="s2"> &lt;= x)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;Parameter &#39;</span><span class="si">%s</span><span class="s2">&#39; is outside of the expected value range (</span><span class="si">%.4f</span><span class="s2"> &lt;= x &lt;= </span><span class="si">%.4f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_callable</span><span class="p">(</span><span class="n">value_range</span><span class="p">):</span>
            <span class="n">value_range</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Unexpected input for value_range, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value_range</span><span class="p">),))</span>

    <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_integer</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">allow_floats</span> <span class="ow">and</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_float</span><span class="p">(</span><span class="n">param</span><span class="p">)):</span>
        <span class="n">check_value_range</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Deterministic</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">param</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">tuple_to_uniform</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">allow_floats</span><span class="p">:</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="s2">&quot;Expected number, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">]),))</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="s2">&quot;Expected number, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">]),))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">ia</span><span class="o">.</span><span class="n">is_single_integer</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="s2">&quot;Expected integer, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">]),))</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">ia</span><span class="o">.</span><span class="n">is_single_integer</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="s2">&quot;Expected integer, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">]),))</span>
        <span class="n">check_value_range</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">check_value_range</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">DiscreteUniform</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="k">elif</span> <span class="n">list_to_choice</span> <span class="ow">and</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">param_i</span> <span class="ow">in</span> <span class="n">param</span><span class="p">:</span>
            <span class="n">check_value_range</span><span class="p">(</span><span class="n">param_i</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Choice</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">param_i</span><span class="p">)</span> <span class="k">for</span> <span class="n">param_i</span> <span class="ow">in</span> <span class="n">param</span><span class="p">])</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">param</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">allow_floats</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected number, tuple of two number, list of number or StochasticParameter for </span><span class="si">%s</span><span class="s2">, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">param</span><span class="p">),))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected int, tuple of two int, list of int or StochasticParameter for </span><span class="si">%s</span><span class="s2">, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">param</span><span class="p">),))</span></div>

<div class="viewcode-block" id="handle_probability_param"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.handle_probability_param">[docs]</a><span class="k">def</span> <span class="nf">handle_probability_param</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="n">eps</span> <span class="o">=</span> <span class="mf">1e-6</span>
    <span class="k">if</span> <span class="n">param</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">Deterministic</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">param</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">param</span><span class="p">):</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="mf">0.0</span> <span class="o">&lt;=</span> <span class="n">param</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="mf">0.0</span><span class="o">-</span><span class="n">eps</span> <span class="o">&lt;</span> <span class="n">param</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="o">+</span><span class="n">eps</span> <span class="ow">or</span> <span class="mf">1.0</span><span class="o">-</span><span class="n">eps</span> <span class="o">&lt;</span> <span class="n">param</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="o">+</span><span class="n">eps</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Deterministic</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">param</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Binomial</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">param</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected boolean or number or StochasticParameter for </span><span class="si">%s</span><span class="s2">, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">param</span><span class="p">),))</span></div>

<div class="viewcode-block" id="force_np_float_dtype"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.force_np_float_dtype">[docs]</a><span class="k">def</span> <span class="nf">force_np_float_dtype</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">val</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">NP_FLOAT_TYPES</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">val</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">val</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span></div>

<div class="viewcode-block" id="both_np_float_if_one_is_float"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.both_np_float_if_one_is_float">[docs]</a><span class="k">def</span> <span class="nf">both_np_float_if_one_is_float</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">a_f</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">NP_FLOAT_TYPES</span>
    <span class="n">b_f</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">NP_FLOAT_TYPES</span>
    <span class="k">if</span> <span class="n">a_f</span> <span class="ow">and</span> <span class="n">b_f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
    <span class="k">elif</span> <span class="n">a_f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">b_f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">),</span> <span class="n">b</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">),</span> <span class="n">b</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span></div>

<div class="viewcode-block" id="draw_distributions_grid"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.draw_distributions_grid">[docs]</a><span class="k">def</span> <span class="nf">draw_distributions_grid</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">graph_sizes</span><span class="o">=</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="mi">350</span><span class="p">),</span> <span class="n">sample_sizes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titles</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">titles</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">titles</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sample_sizes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="n">param_i</span><span class="o">.</span><span class="n">draw_distribution_graph</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size_i</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title_i</span><span class="p">)</span> <span class="k">for</span> <span class="n">param_i</span><span class="p">,</span> <span class="n">size_i</span><span class="p">,</span> <span class="n">title_i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">sample_sizes</span><span class="p">,</span> <span class="n">titles</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="n">param_i</span><span class="o">.</span><span class="n">draw_distribution_graph</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title_i</span><span class="p">)</span> <span class="k">for</span> <span class="n">param_i</span><span class="p">,</span> <span class="n">title_i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">titles</span><span class="p">)]</span>

    <span class="n">images_rs</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">imresize_many_images</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">images</span><span class="p">),</span> <span class="n">sizes</span><span class="o">=</span><span class="n">graph_sizes</span><span class="p">)</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">draw_grid</span><span class="p">(</span><span class="n">images_rs</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">grid</span></div>

<div class="viewcode-block" id="show_distributions_grid"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.show_distributions_grid">[docs]</a><span class="k">def</span> <span class="nf">show_distributions_grid</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">graph_sizes</span><span class="o">=</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="mi">350</span><span class="p">),</span> <span class="n">sample_sizes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titles</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">misc</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
        <span class="n">draw_distributions_grid</span><span class="p">(</span>
            <span class="n">params</span><span class="p">,</span>
            <span class="n">graph_sizes</span><span class="o">=</span><span class="n">graph_sizes</span><span class="p">,</span>
            <span class="n">sample_sizes</span><span class="o">=</span><span class="n">sample_sizes</span><span class="p">,</span>
            <span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span>
            <span class="n">cols</span><span class="o">=</span><span class="n">cols</span><span class="p">,</span>
            <span class="n">titles</span><span class="o">=</span><span class="n">titles</span>
        <span class="p">)</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="StochasticParameter"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.StochasticParameter">[docs]</a><span class="nd">@six</span><span class="o">.</span><span class="n">add_metaclass</span><span class="p">(</span><span class="n">ABCMeta</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">StochasticParameter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="c1"># pylint: disable=locally-disabled, unused-variable, line-too-long</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract parent class for all stochastic parameters.</span>

<span class="sd">    Stochastic parameters are here all parameters from which values are</span>
<span class="sd">    supposed to be sampled. Usually the sampled values are to a degree random.</span>
<span class="sd">    E.g. a stochastic parameter may be the range [-10, 10], with sampled</span>
<span class="sd">    values being 5.2, -3.7, -9.7 and 6.4.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

<div class="viewcode-block" id="StochasticParameter.draw_sample"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.StochasticParameter.draw_sample">[docs]</a>    <span class="k">def</span> <span class="nf">draw_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws a single sample value from this parameter.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        random_state : None or np.random.RandomState, optional(default=None)</span>
<span class="sd">            A random state to use during the sampling process.</span>
<span class="sd">            If None, the libraries global random state will be used.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        out : anything</span>
<span class="sd">            A single sample value.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="StochasticParameter.draw_samples"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.StochasticParameter.draw_samples">[docs]</a>    <span class="k">def</span> <span class="nf">draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws one or more sample values from the parameter.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        size : tuple of int</span>
<span class="sd">            Number of sample values by</span>
<span class="sd">            dimension.</span>

<span class="sd">        random_state : None or np.random.RandomState, optional(default=None)</span>
<span class="sd">            A random state to use during the sampling process.</span>
<span class="sd">            If None, the libraries global random state will be used.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        out : (size) iterable</span>
<span class="sd">            Sampled values. Usually a numpy ndarray of basically any dtype,</span>
<span class="sd">            though not strictly limited to numpy arrays.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">random_state</span> <span class="o">=</span> <span class="n">random_state</span> <span class="k">if</span> <span class="n">random_state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">ia</span><span class="o">.</span><span class="n">current_random_state</span><span class="p">()</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">)</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">forward_random_state</span><span class="p">(</span><span class="n">random_state</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">samples</span></div>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: StochasticParameter + </span><span class="si">%s</span><span class="s2">. Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Subtract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: StochasticParameter - </span><span class="si">%s</span><span class="s2">. Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: StochasticParameter * </span><span class="si">%s</span><span class="s2">. Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">z</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Modulo power is currently not supported by StochasticParameter.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Power</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: StochasticParameter ** </span><span class="si">%s</span><span class="s2">. Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Divide</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: StochasticParameter / </span><span class="si">%s</span><span class="s2">. Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Divide</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: StochasticParameter / </span><span class="si">%s</span><span class="s2"> (truediv). Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__floordiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Discretize</span><span class="p">(</span><span class="n">Divide</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: StochasticParameter // </span><span class="si">%s</span><span class="s2"> (floordiv). Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Add</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: </span><span class="si">%s</span><span class="s2"> + StochasticParameter. Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Subtract</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: </span><span class="si">%s</span><span class="s2"> - StochasticParameter. Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Multiply</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: </span><span class="si">%s</span><span class="s2"> * StochasticParameter. Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__rpow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">z</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Modulo power is currently not supported by StochasticParameter.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Power</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: </span><span class="si">%s</span><span class="s2"> ** StochasticParameter. Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__rdiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Divide</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: </span><span class="si">%s</span><span class="s2"> / StochasticParameter. Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__rtruediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Divide</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: </span><span class="si">%s</span><span class="s2"> / StochasticParameter (rtruediv). Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">__rfloordiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Discretize</span><span class="p">(</span><span class="n">Divide</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid datatypes in: StochasticParameter // </span><span class="si">%s</span><span class="s2"> (rfloordiv). Expected second argument to be number or StochasticParameter.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),))</span>

<div class="viewcode-block" id="StochasticParameter.copy"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.StochasticParameter.copy">[docs]</a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a shallow copy of this parameter.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        out : StochasticParameter</span>
<span class="sd">            Shallow copy.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">copy_module</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="StochasticParameter.deepcopy"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.StochasticParameter.deepcopy">[docs]</a>    <span class="k">def</span> <span class="nf">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a deep copy of this parameter.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        out : StochasticParameter</span>
<span class="sd">            Deep copy.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">copy_module</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="StochasticParameter.draw_distribution_graph"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.StochasticParameter.draw_distribution_graph">[docs]</a>    <span class="k">def</span> <span class="nf">draw_distribution_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate a plot (image) that shows the parameter&#39;s distribution of</span>
<span class="sd">        values.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        title : None or False or string, optional(default=None)</span>
<span class="sd">            Title of the plot. None is automatically replaced by a title</span>
<span class="sd">            derived from `str(param)`. If set to False, no title will be</span>
<span class="sd">            shown.</span>

<span class="sd">        size : tuple of int</span>
<span class="sd">            Number of points to sample. This is always expected to have at</span>
<span class="sd">            least two values. The first defines the number of sampling runs,</span>
<span class="sd">            the second (and further) dimensions define the size assigned</span>
<span class="sd">            to each `draw_samples()` call. E.g. `(10, 20, 15)` will lead</span>
<span class="sd">            to `10` calls of `draw_samples(size=(20, 15))`. The results</span>
<span class="sd">            will be merged to a single 1d array.</span>

<span class="sd">        bins : int</span>
<span class="sd">            Number of bins in the plot histograms.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        data : (H,W,3) ndarray</span>
<span class="sd">            Image of the plot.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

        <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">sm</span><span class="o">.</span><span class="n">xrange</span><span class="p">(</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span><span class="o">.</span><span class="n">flatten</span><span class="p">())</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
        <span class="n">heights</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>
        <span class="n">heights</span> <span class="o">=</span> <span class="n">heights</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">heights</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
            <span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">heights</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">bins</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">bins</span><span class="p">))</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">bins</span><span class="p">),</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span>
        <span class="p">)</span>
        <span class="c1">#print(&quot;[draw_distribution_graph] points&quot;, points[0:100])</span>
        <span class="c1">#print(&quot;[draw_distribution_graph] min/max/avg&quot;, np.min(points), np.max(points), np.average(points))</span>
        <span class="c1">#print(&quot;[draw_distribution_graph] bins&quot;, len(bins), bins[0:10], heights[0:10])</span>

        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">title</span> <span class="o">!=</span> <span class="kc">False</span><span class="p">:</span>
            <span class="c1"># split long titles - otherwise matplotlib generates errors</span>
            <span class="n">title_fragments</span> <span class="o">=</span> <span class="p">[</span><span class="n">title</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">50</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sm</span><span class="o">.</span><span class="n">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">),</span> <span class="mi">50</span><span class="p">)]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">title_fragments</span><span class="p">))</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">tostring_rgb</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">get_width_height</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mi">3</span><span class="p">,))</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">data</span></div></div>

<div class="viewcode-block" id="Binomial"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Binomial">[docs]</a><span class="k">class</span> <span class="nc">Binomial</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Binomial distribution.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    p : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Probability of the binomial distribution. Expected to be in the</span>
<span class="sd">        range [0, 1]. If this is a StochasticParameter, the value will be</span>
<span class="sd">        sampled once per call to _draw_samples().</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Binomial(Uniform(0.01, 0.2))</span>

<span class="sd">    Uses a varying probability `p` between 0.01 and 0.2 per sampling.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Binomial</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        if isinstance(p, StochasticParameter):</span>
<span class="sd">            self.p = p</span>
<span class="sd">        elif ia.is_single_number(p):</span>
<span class="sd">            ia.do_assert(0 &lt;= p &lt;= 1.0, &quot;Expected probability p to be in range [0.0, 1.0], got %s.&quot; % (p,))</span>
<span class="sd">            self.p = Deterministic(float(p))</span>
<span class="sd">        else:</span>
<span class="sd">            raise Exception(&quot;Expected StochasticParameter or float/int value, got %s.&quot; % (type(p),))</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">p</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;Expected probability p to be in range [0.0, 1.0], got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p</span><span class="p">,))</span>
        <span class="k">return</span> <span class="n">random_state</span><span class="o">.</span><span class="n">binomial</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Binomial(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">,)</span></div>

<div class="viewcode-block" id="Choice"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Choice">[docs]</a><span class="k">class</span> <span class="nc">Choice</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter that samples value from a list of allowed values.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    a : iterable</span>
<span class="sd">        List of allowed values.</span>
<span class="sd">        Usually expected to be integers, floats or strings.</span>

<span class="sd">    replace : bool, optional(default=True)</span>
<span class="sd">        Whether to perform sampling with or without</span>
<span class="sd">        replacing.</span>

<span class="sd">    p : None or iterable, optional(default=None)</span>
<span class="sd">        Optional probabilities of each element in `a`.</span>
<span class="sd">        Must have the same length as `a` (if provided).</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Choice([0.25, 0.5, 0.75], p=[0.25, 0.5, 0.25])</span>

<span class="sd">    Parameter of which 50 pecent of all sampled values will be 0.5.</span>
<span class="sd">    The other 50 percent will be either 0.25 or 0.75.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Choice</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">ia</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="s2">&quot;Expected a to be an iterable (e.g. list), got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">),))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replace</span> <span class="o">=</span> <span class="n">replace</span>
        <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">ia</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="s2">&quot;Expected p to be None or an iterable, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">p</span><span class="p">),))</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="s2">&quot;Expected lengths of a and p to be identical, got </span><span class="si">%d</span><span class="s2"> and </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">a_i</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">)</span> <span class="k">for</span> <span class="n">a_i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">]):</span>
            <span class="n">seed</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">samples</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">size</span><span class="p">),</span> <span class="n">replace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">)</span>

            <span class="c1"># collect the sampled parameters and how many samples must be taken</span>
            <span class="c1"># from each of them</span>
            <span class="n">params_counter</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1">#params_keys = set()</span>
            <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
                    <span class="n">key</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
                    <span class="n">params_counter</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="c1">#params_keys.add(key)</span>

            <span class="c1"># collect per parameter once the required number of samples</span>
            <span class="c1"># iterate here over self.a to always use the same seed for</span>
            <span class="c1"># the same parameter</span>
            <span class="c1"># TODO this might fail if the same parameter is added</span>
            <span class="c1"># multiple times to self.a?</span>
            <span class="c1"># TODO this will fail if a parameter cant handle size=(N,)</span>
            <span class="n">param_to_samples</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">param</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">):</span>
                <span class="n">key</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">params_counter</span><span class="p">:</span>
                    <span class="c1">#print(&quot;[Choice] sampling %d from %s&quot; % (params_counter[key], key))</span>
                    <span class="n">param_to_samples</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span>
                        <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">params_counter</span><span class="p">[</span><span class="n">key</span><span class="p">],),</span>
                        <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
                    <span class="p">)</span>

            <span class="c1"># assign the values sampled from the parameters to the `samples`</span>
            <span class="c1"># array by replacing the respective parameter</span>
            <span class="n">param_to_readcount</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sample</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">samples</span><span class="p">):</span>
                <span class="c1">#if i%10 == 0:</span>
                <span class="c1">#    print(&quot;[Choice] assigning sample %d&quot; % (i,))</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
                    <span class="n">key</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
                    <span class="n">readcount</span> <span class="o">=</span> <span class="n">param_to_readcount</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="c1">#if readcount%10==0:</span>
                    <span class="c1">#    print(&quot;[Choice] readcount %d for %s&quot; % (readcount, key))</span>
                    <span class="n">samples</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">param_to_samples</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">readcount</span><span class="p">]</span>
                    <span class="n">param_to_readcount</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">samples</span> <span class="o">=</span> <span class="n">samples</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">samples</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">samples</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Choice(a=</span><span class="si">%s</span><span class="s2">, replace=</span><span class="si">%s</span><span class="s2">, p=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">),)</span></div>

<div class="viewcode-block" id="DiscreteUniform"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.DiscreteUniform">[docs]</a><span class="k">class</span> <span class="nc">DiscreteUniform</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter that resembles a discrete range of values [a .. b].</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    {a, b} : int or StochasticParameter</span>
<span class="sd">        Lower and upper bound of the sampling range. Values will be sampled</span>
<span class="sd">        from a &lt;= x &lt;= b. All sampled values will be discrete. If a or b is</span>
<span class="sd">        a StochasticParameter, it will be queried once per sampling to</span>
<span class="sd">        estimate the value of a/b. If a&gt;b, the values will automatically be</span>
<span class="sd">        flipped. If a==b, all generated values will be identical to a.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = DiscreteUniform(10, Choice([20, 30, 40]))</span>

<span class="sd">    Sampled values will be discrete and come from the either [10..20] or</span>
<span class="sd">    [10..30] or [10..40].</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DiscreteUniform</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        # for two ints the samples will be from range a &lt;= x &lt;= b</span>
<span class="sd">        ia.do_assert(isinstance(a, (int, StochasticParameter)), &quot;Expected a to be int or StochasticParameter, got %s&quot; % (type(a),))</span>
<span class="sd">        ia.do_assert(isinstance(b, (int, StochasticParameter)), &quot;Expected b to be int or StochasticParameter, got %s&quot; % (type(b),))</span>

<span class="sd">        if ia.is_single_integer(a):</span>
<span class="sd">            self.a = Deterministic(a)</span>
<span class="sd">        else:</span>
<span class="sd">            self.a = a</span>

<span class="sd">        if ia.is_single_integer(b):</span>
<span class="sd">            self.b = Deterministic(b)</span>
<span class="sd">        else:</span>
<span class="sd">            self.b = b</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">handle_discrete_param</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">handle_discrete_param</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">:</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span>
        <span class="k">elif</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">a</span><span class="p">]),</span> <span class="n">size</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;DiscreteUniform(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span></div>

<div class="viewcode-block" id="Poisson"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Poisson">[docs]</a><span class="k">class</span> <span class="nc">Poisson</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter that resembles a poisson distribution.</span>

<span class="sd">    A poisson distribution with lambda=0 has its highest probability at</span>
<span class="sd">    point 0 and decreases quickly from there.</span>
<span class="sd">    Poisson distributions are discrete and never negative.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    lam : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Lambda parameter of the poisson</span>
<span class="sd">        distribution.</span>
<span class="sd">            * If a number, this number will be used as a constant value.</span>
<span class="sd">            * If a tuple of two numbers (a, b), the value will be sampled</span>
<span class="sd">              once per call to `_draw_samples()` from the range [a, b).</span>
<span class="sd">            * If a list of numbers, a random value will be picked from the</span>
<span class="sd">              list per call to `_draw_samples()`.</span>
<span class="sd">            * If a StochasticParameter, that parameter will be queried once</span>
<span class="sd">              per call to `_draw_samples()`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Poisson(1)</span>

<span class="sd">    Sample from a poisson distribution with lambda=1.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lam</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Poisson</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lam</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">lam</span><span class="p">,</span> <span class="s2">&quot;lam&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">lam</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lam</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">lam</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">lam</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">random_state</span><span class="o">.</span><span class="n">poisson</span><span class="p">(</span><span class="n">lam</span><span class="o">=</span><span class="n">lam</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Poisson(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lam</span><span class="p">,)</span></div>

<div class="viewcode-block" id="Normal"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Normal">[docs]</a><span class="k">class</span> <span class="nc">Normal</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter that resembles a (continuous) normal distribution.</span>

<span class="sd">    This is a wrapper around numpy&#39;s random.normal().</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    loc : number or StochasticParameter</span>
<span class="sd">        The mean of the normal distribution.</span>
<span class="sd">        If StochasticParameter, the mean will be sampled once per call</span>
<span class="sd">        to `_draw_samples()`.</span>

<span class="sd">    scale : number or StochasticParameter</span>
<span class="sd">        The standard deviation of the normal distribution.</span>
<span class="sd">        If StochasticParameter, the scale will be sampled once per call</span>
<span class="sd">        to `_draw_samples()`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Normal(Choice([-1.0, 1.0]), 1.0)</span>

<span class="sd">    A standard normal distribution, which&#39;s mean is shifted either 1.0 to</span>
<span class="sd">    the left or 1.0 to the right.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Normal</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="s2">&quot;loc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="s2">&quot;scale&quot;</span><span class="p">,</span> <span class="n">value_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">scale</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Expected scale to be in range [0, inf), got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">scale</span><span class="p">,))</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">random_state</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Normal(loc=</span><span class="si">%s</span><span class="s2">, scale=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span></div>

<div class="viewcode-block" id="Laplace"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Laplace">[docs]</a><span class="k">class</span> <span class="nc">Laplace</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter that resembles a (continuous) laplace distribution.</span>

<span class="sd">    This is a wrapper around numpy&#39;s random.laplace().</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    loc : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        The position of the distribution peak, similar to the mean in normal</span>
<span class="sd">        distributions.</span>
<span class="sd">            * If a single number, this number will be used as a constant value.</span>
<span class="sd">            * If a tuple of two numbers (a, b), the value will be sampled</span>
<span class="sd">              once per call to `_draw_samples()` from the continuous</span>
<span class="sd">              range [a, b).</span>
<span class="sd">            * If a list of numbers, a random value will be picked from the</span>
<span class="sd">              list per call to `_draw_samples()`.</span>
<span class="sd">            * If a StochasticParameter, that parameter will be queried once</span>
<span class="sd">              per call to `_draw_samples()`.</span>

<span class="sd">    scale : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        The exponential decay factor, similar to standard deviation in</span>
<span class="sd">        normal distributions.</span>
<span class="sd">            * If a single number, this number will be used as a constant value.</span>
<span class="sd">            * If a tuple of two numbers (a, b), the value will be sampled</span>
<span class="sd">              once per call to `_draw_samples()` from the continuous</span>
<span class="sd">              range [a, b).</span>
<span class="sd">            * If a list of numbers, a random value will be picked from the</span>
<span class="sd">              list per call to `_draw_samples()`.</span>
<span class="sd">            * If a StochasticParameter, that parameter will be queried once</span>
<span class="sd">              per call to `_draw_samples()`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Laplace(0, 1.0)</span>

<span class="sd">    A laplace distribution, which&#39;s peak is at 0 and decay is 1.0.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Laplace</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="s2">&quot;loc&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="s2">&quot;scale&quot;</span><span class="p">,</span> <span class="n">value_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">scale</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Expected scale to be in range [0, inf), got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">scale</span><span class="p">,))</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">random_state</span><span class="o">.</span><span class="n">laplace</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Laplace(loc=</span><span class="si">%s</span><span class="s2">, scale=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span></div>

<div class="viewcode-block" id="ChiSquare"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.ChiSquare">[docs]</a><span class="k">class</span> <span class="nc">ChiSquare</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter that resembles a (continuous) chi-square distribution.</span>

<span class="sd">    This is a wrapper around numpy&#39;s random.chisquare().</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : int or tuple of two int or list of int or StochasticParameter</span>
<span class="sd">        Degrees of freedom (must be 1 or</span>
<span class="sd">        higher).</span>
<span class="sd">            * If a single int, this int will be used as a constant value.</span>
<span class="sd">            * If a tuple of two ints (a, b), the value will be sampled</span>
<span class="sd">              once per call to `_draw_samples()` from the discrete</span>
<span class="sd">              range [a..b].</span>
<span class="sd">            * If a list of ints, a random value will be picked from the</span>
<span class="sd">              list per call to `_draw_samples()`.</span>
<span class="sd">            * If a StochasticParameter, that parameter will be queried once</span>
<span class="sd">              per call to `_draw_samples()`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = ChiSquare(df=2)</span>

<span class="sd">    A chi-square distribution with two degrees of freedom.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ChiSquare</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">handle_discrete_param</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">value_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">df</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Expected df to be in range [1, inf), got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">df</span><span class="p">,))</span>
        <span class="k">return</span> <span class="n">random_state</span><span class="o">.</span><span class="n">chisquare</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;ChiSquare(df=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">,)</span></div>

<div class="viewcode-block" id="Weibull"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Weibull">[docs]</a><span class="k">class</span> <span class="nc">Weibull</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter that resembles a (continuous) weibull distribution.</span>

<span class="sd">    This is a wrapper around numpy&#39;s random.weibull().</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    a : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Shape parameter of the</span>
<span class="sd">        distribution.</span>
<span class="sd">            * If a single number, this number will be used as a constant value.</span>
<span class="sd">            * If a tuple of two numbers (a, b), the value will be sampled</span>
<span class="sd">              once per call to `_draw_samples()` from the continuous</span>
<span class="sd">              range [a, b).</span>
<span class="sd">            * If a list of numbers, a random value will be picked from the</span>
<span class="sd">              list per call to `_draw_samples()`.</span>
<span class="sd">            * If a StochasticParameter, that parameter will be queried once</span>
<span class="sd">              per call to `_draw_samples()`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Weibull(a=0.5)</span>

<span class="sd">    A weibull distribution with shape 0.5.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Weibull</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">value_range</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0001</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Expected a to be in range (0, inf), got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,))</span>
        <span class="k">return</span> <span class="n">random_state</span><span class="o">.</span><span class="n">weibull</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Weibull(a=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,)</span></div>

<div class="viewcode-block" id="Uniform"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Uniform">[docs]</a><span class="k">class</span> <span class="nc">Uniform</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter that resembles a (continuous) uniform range [a, b).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    {a, b} : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Lower and upper bound of the sampling range. Values will be sampled</span>
<span class="sd">        from a &lt;= x &lt; b. All sampled values will be continuous. If a or b is</span>
<span class="sd">        a StochasticParameter, it will be queried once per sampling to</span>
<span class="sd">        estimate the value of a/b. If a&gt;b, the values will automatically be</span>
<span class="sd">        flipped. If a==b, all generated values will be identical to a.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Uniform(0, 10.0)</span>

<span class="sd">    Samples random values from the range [0, 10.0).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Uniform</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ia.do_assert(isinstance(a, (int, float, StochasticParameter)), &quot;Expected a to be int, float or StochasticParameter, got %s&quot; % (type(a),))</span>
<span class="sd">        ia.do_assert(isinstance(b, (int, float, StochasticParameter)), &quot;Expected b to be int, float or StochasticParameter, got %s&quot; % (type(b),))</span>

<span class="sd">        if ia.is_single_number(a):</span>
<span class="sd">            self.a = Deterministic(a)</span>
<span class="sd">        else:</span>
<span class="sd">            self.a = a</span>

<span class="sd">        if ia.is_single_number(b):</span>
<span class="sd">            self.b = Deterministic(b)</span>
<span class="sd">        else:</span>
<span class="sd">            self.b = b</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">:</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span>
        <span class="k">elif</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">a</span><span class="p">]),</span> <span class="n">size</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">random_state</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Uniform(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span></div>

<div class="viewcode-block" id="Beta"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Beta">[docs]</a><span class="k">class</span> <span class="nc">Beta</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter that resembles a (continuous) beta distribution.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    {alpha, beta} : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        alpha and beta parameters of the beta</span>
<span class="sd">        distribution.</span>
<span class="sd">            * If number, that number will always be used.</span>
<span class="sd">            * If tuple of two number, a random value will be sampled per</span>
<span class="sd">              call to `_draw_samples()` from the range [a, b).</span>
<span class="sd">            * If list of number, a random element from that list will be</span>
<span class="sd">              sampled per call to `_draw_samples()`.</span>
<span class="sd">            * If a StochasticParameter, a random value will be sampled</span>
<span class="sd">              from that parameter per call to `_draw_samples()`.</span>
<span class="sd">        alpha and beta have to be values above 0. If they end up &lt;=0 they</span>
<span class="sd">        are automatically clipped to 0+epsilon.</span>

<span class="sd">    epsilon : number</span>
<span class="sd">        Clipping parameter. If alpha or beta end up &lt;=0, they are clipped to</span>
<span class="sd">        0+epsilon.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Beta(0.5, 0.5)</span>

<span class="sd">    Samples random values from the beta distribution with alpha=beta=0.5.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="n">epsilon</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Beta</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beta</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="s2">&quot;beta&quot;</span><span class="p">)</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">epsilon</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epsilon</span> <span class="o">=</span> <span class="n">epsilon</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">epsilon</span><span class="p">)</span>
        <span class="n">beta</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">epsilon</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">random_state</span><span class="o">.</span><span class="n">beta</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Beta(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">beta</span><span class="p">)</span></div>

<div class="viewcode-block" id="Deterministic"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Deterministic">[docs]</a><span class="k">class</span> <span class="nc">Deterministic</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter that resembles a constant value.</span>

<span class="sd">    If N values are sampled from this parameter, it will return N times V,</span>
<span class="sd">    where V is the constant value.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    value : number or string or StochasticParameter</span>
<span class="sd">        A constant value to use.</span>
<span class="sd">        A string may be provided to generate arrays of strings.</span>
<span class="sd">        If this is a StochasticParameter, a single value will be sampled</span>
<span class="sd">        from it exactly once and then used as the constant value.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Deterministic(10)</span>

<span class="sd">    Will always sample the value 10.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Deterministic</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected StochasticParameter object or number or string, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">]),</span> <span class="n">size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_integer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;Deterministic(int </span><span class="si">%d</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,)</span>
        <span class="k">elif</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;Deterministic(float </span><span class="si">%.8f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Deterministic(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">),)</span></div>

<div class="viewcode-block" id="FromLowerResolution"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.FromLowerResolution">[docs]</a><span class="k">class</span> <span class="nc">FromLowerResolution</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A meta parameter used to sample other parameter values on a low resolution</span>
<span class="sd">    2d plane (where 2d means of size (H,W,C)).</span>

<span class="sd">    This is intended to be used with parameters that would usually sample</span>
<span class="sd">    once value per pixel (or one value per pixel and channel). With this</span>
<span class="sd">    parameter, the sampling can be made more coarse, i.e. the result will</span>
<span class="sd">    become rectangles instead of single pixels.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : StochasticParameter</span>
<span class="sd">        The other parameter which is to be sampled on a coarser</span>
<span class="sd">        image.</span>

<span class="sd">    size_percent : None or number or iterable of two numbers or StochasticParameter, optional(default=None)</span>
<span class="sd">        Size of the 2d sampling plane in percent of the requested size.</span>
<span class="sd">        I.e. this is relative to the size provided in the call to</span>
<span class="sd">        `_draw_samples(size, ...)`. Lower values will result in smaller</span>
<span class="sd">        sampling planes, which are then upsampled to `size`. This means that</span>
<span class="sd">        lower values will result in larger rectangles.</span>
<span class="sd">        The size may be provided as a constant value or a tuple (a, b), which</span>
<span class="sd">        will automatically be converted to the continuous uniform range [a, b)</span>
<span class="sd">        or a StochasticParameter, which will be queried per call to</span>
<span class="sd">        `_draw_samples()`.</span>

<span class="sd">    size_px : None or number or iterable of two numbers or StochasticParameter, optional(default=None)</span>
<span class="sd">        Size of the 2d sampling plane in pixels.</span>
<span class="sd">        Lower values will result in smaller sampling planes, which are then</span>
<span class="sd">        upsampled to the input `size` of `draw_samples(size, ...)`.</span>
<span class="sd">        This means that lower values will result in larger rectangles.</span>
<span class="sd">        The size may be provided as a constant value or a tuple (a, b), which</span>
<span class="sd">        will automatically be converted to the discrete uniform range [a..b]</span>
<span class="sd">        or a StochasticParameter, which will be queried per call to</span>
<span class="sd">        `_draw_samples()`.</span>

<span class="sd">    method : string or int or StochasticParameter, optional(default=&quot;nearest&quot;)</span>
<span class="sd">        Upsampling/interpolation method to use. This is used after the sampling</span>
<span class="sd">        is finished and the low resolution plane has to be upsampled to the</span>
<span class="sd">        requested `size` in `_draw_samples(size, ...)`. The method may be</span>
<span class="sd">        the same as in `imgaug.imresize_many_images()`. Usually `nearest`</span>
<span class="sd">        or `linear` are good choices. `nearest` will result in rectangles</span>
<span class="sd">        with sharp edges and `linear` in rectangles with blurry and round</span>
<span class="sd">        edges. The method may be provided as a StochasticParameter, which</span>
<span class="sd">        will be queried per call to `_draw_samples()`.</span>

<span class="sd">    min_size : int, optional(default=1)</span>
<span class="sd">        Minimum size in pixels of the low resolution sampling</span>
<span class="sd">        plane.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = FromLowerResolution(Binomial(0.05), size_px=(2, 16), method=Choice([&quot;nearest&quot;, &quot;linear&quot;]))</span>

<span class="sd">    Samples from a binomial distribution with p=0.05. The sampling plane</span>
<span class="sd">    will always have a size HxWxC with H and W being independently sampled</span>
<span class="sd">    from [2..16] (i.e. it may range from 2x2xC up to 16x16xC max, but may</span>
<span class="sd">    also be e.g. 4x8xC). The upsampling method will be &quot;nearest&quot; in 50 percent</span>
<span class="sd">    of all cases and &quot;linear&quot; in the other 50 percent. The result will</span>
<span class="sd">    sometimes be rectangular patches of sharp 1s surrounded by 0s and</span>
<span class="sd">    sometimes blurry blobs of 1s, surrounded by values &lt;1.0.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">,</span> <span class="n">size_percent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">size_px</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">,</span> <span class="n">min_size</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FromLowerResolution</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">size_percent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">size_px</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">size_percent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">size_method</span> <span class="o">=</span> <span class="s2">&quot;percent&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">size_px</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">size_percent</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">size_percent</span> <span class="o">=</span> <span class="n">Deterministic</span><span class="p">(</span><span class="n">size_percent</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">size_percent</span><span class="p">):</span>
                <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">size_percent</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">size_percent</span> <span class="o">=</span> <span class="n">Uniform</span><span class="p">(</span><span class="n">size_percent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size_percent</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">size_percent</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">size_percent</span> <span class="o">=</span> <span class="n">size_percent</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected int, float, tuple of two ints/floats or StochasticParameter for size_percent, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">size_percent</span><span class="p">),))</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># = elif size_px is not None:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">size_method</span> <span class="o">=</span> <span class="s2">&quot;px&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">size_percent</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_integer</span><span class="p">(</span><span class="n">size_px</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">size_px</span> <span class="o">=</span> <span class="n">Deterministic</span><span class="p">(</span><span class="n">size_px</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">size_px</span><span class="p">):</span>
                <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">size_px</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">size_px</span> <span class="o">=</span> <span class="n">DiscreteUniform</span><span class="p">(</span><span class="n">size_px</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size_px</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">size_px</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">size_px</span> <span class="o">=</span> <span class="n">size_px</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected int, float, tuple of two ints/floats or StochasticParameter for size_px, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">size_px</span><span class="p">),))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">other_param</span>

        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">method</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_integer</span><span class="p">(</span><span class="n">method</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">Deterministic</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">method</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected string or StochasticParameter, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">method</span><span class="p">),))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">min_size</span> <span class="o">=</span> <span class="n">min_size</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">size</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">size</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;FromLowerResolution can only generate samples of shape (H, W, C) or (N, H, W, C), requested was </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">size</span><span class="p">),))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size_method</span> <span class="o">==</span> <span class="s2">&quot;percent&quot;</span><span class="p">:</span>
            <span class="n">hw_percents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size_percent</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">((</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
            <span class="n">hw_pxs</span> <span class="o">=</span> <span class="p">(</span><span class="n">hw_percents</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">]))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hw_pxs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size_px</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">((</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>

        <span class="n">methods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">((</span><span class="n">n</span><span class="p">,),</span> <span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">hw_px</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">hw_pxs</span><span class="p">,</span> <span class="n">methods</span><span class="p">)):</span>
            <span class="n">h_small</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">hw_px</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_size</span><span class="p">)</span>
            <span class="n">w_small</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">hw_px</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_size</span><span class="p">)</span>
            <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">h_small</span><span class="p">,</span> <span class="n">w_small</span><span class="p">,</span> <span class="n">c</span><span class="p">),</span> <span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">!=</span> <span class="s2">&quot;nearest&quot;</span><span class="p">:</span>
                <span class="c1"># hacky cast because opencv resize seems to be unable to handle non-nearest</span>
                <span class="c1"># interpolation methods in combination with large ints</span>
                <span class="c1"># also, using lower ints with interpolation!=nearest seems to not result in the</span>
                <span class="c1"># expected &quot;gradual&quot; values, but rather still behave like nearest</span>
                <span class="n">samples</span> <span class="o">=</span> <span class="n">samples</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
            <span class="n">samples_upscaled</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">imresize_many_images</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">),</span> <span class="n">interpolation</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">c</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">samples_upscaled</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">samples_upscaled</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size_method</span> <span class="o">==</span> <span class="s2">&quot;percent&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;FromLowerResolution(size_percent=</span><span class="si">%s</span><span class="s2">, method=</span><span class="si">%s</span><span class="s2">, other_param=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size_percent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;FromLowerResolution(size_px=</span><span class="si">%s</span><span class="s2">, method=</span><span class="si">%s</span><span class="s2">, other_param=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size_px</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">)</span></div>

<div class="viewcode-block" id="Clip"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Clip">[docs]</a><span class="k">class</span> <span class="nc">Clip</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clips another parameter to a defined value range.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : StochasticParameter</span>
<span class="sd">        The other parameter, which&#39;s values are to be</span>
<span class="sd">        clipped.</span>

<span class="sd">    minval : None or number, optional(default=None)</span>
<span class="sd">        The minimum value to use.</span>
<span class="sd">        If None, no minimum will be used.</span>

<span class="sd">    maxval : None or number, optional(default=None)</span>
<span class="sd">        The maximum value to use.</span>
<span class="sd">        If None, no maximum will be used.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Clip(Normal(0, 1.0), minval=-2.0, maxval=2.0)</span>

<span class="sd">    Defines a standard normal distribution, which&#39;s values never go below -2.0</span>
<span class="sd">    or above 2.0. Note that this will lead to small &quot;bumps&quot; of higher</span>
<span class="sd">    probability at -2.0 and 2.0, as values below/above these will be clipped</span>
<span class="sd">    to them.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">,</span> <span class="n">minval</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxval</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Clip</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">))</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">minval</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">minval</span><span class="p">))</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">maxval</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">maxval</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">other_param</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minval</span> <span class="o">=</span> <span class="n">minval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxval</span> <span class="o">=</span> <span class="n">maxval</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minval</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxval</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">samples</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">minval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minval</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">samples</span><span class="p">),</span> <span class="n">out</span><span class="o">=</span><span class="n">samples</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">samples</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxval</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">samples</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">samples</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">opstr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Clip(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%.6f</span><span class="s2">, </span><span class="si">%.6f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">opstr</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minval</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxval</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">minval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Clip(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%.6f</span><span class="s2">, None)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">opstr</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minval</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Clip(</span><span class="si">%s</span><span class="s2">, None, </span><span class="si">%.6f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">opstr</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxval</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Clip(</span><span class="si">%s</span><span class="s2">, None, None)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">opstr</span><span class="p">,)</span></div>

<div class="viewcode-block" id="Discretize"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Discretize">[docs]</a><span class="k">class</span> <span class="nc">Discretize</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert values sampled from a continuous distribution into discrete values.</span>

<span class="sd">    This will round the values and then cast them to integers.</span>
<span class="sd">    Values sampled from discrete distributions are not changed.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : StochasticParameter</span>
<span class="sd">        The other parameter, which&#39;s values are to be</span>
<span class="sd">        discretized.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Discretize(Normal(0, 1.0))</span>

<span class="sd">    Generates a discrete standard normal distribution.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Discretize</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">other_param</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span>
            <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_integer_array</span><span class="p">(</span><span class="n">samples</span><span class="p">):</span>
            <span class="c1"># integer array, already discrete</span>
            <span class="k">return</span> <span class="n">samples</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">opstr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Discretize(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">opstr</span><span class="p">,)</span></div>

<div class="viewcode-block" id="Multiply"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Multiply">[docs]</a><span class="k">class</span> <span class="nc">Multiply</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter to multiply other parameter&#39;s results with.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Other parameter which&#39;s sampled values are to be</span>
<span class="sd">        multiplied.</span>

<span class="sd">    val : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Multiplier to use. If this is a StochasticParameter, either</span>
<span class="sd">        a single or multiple values will be sampled and used as the</span>
<span class="sd">        multiplier(s).</span>

<span class="sd">    elementwise : bool, optional(default=False)</span>
<span class="sd">        Controls the sampling behaviour when `val` is a StochasticParameter.</span>
<span class="sd">        If set to False, a single value will be sampled from val and used as</span>
<span class="sd">        the constant multiplier.</span>
<span class="sd">        If set to True and `_draw_samples(size=S)` is called, `S` values will</span>
<span class="sd">        be sampled from `val` and multiplied elementwise with the results</span>
<span class="sd">        of `other_param`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Multiply(Uniform(0.0, 1.0), -1)</span>

<span class="sd">    Converts a uniform range [0.0, 1.0) to (-1.0, 0.0].</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">elementwise</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Multiply</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="s2">&quot;other_param&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="s2">&quot;val&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="o">=</span> <span class="n">elementwise</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">seed</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span>

        <span class="n">elementwise</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">,</span> <span class="n">Deterministic</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">elementwise</span><span class="p">:</span>
            <span class="n">val_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">elementwise</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">val_samples</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">samples</span> <span class="o">*</span> <span class="n">val_samples</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Multiply(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span><span class="p">)</span></div>

<div class="viewcode-block" id="Divide"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Divide">[docs]</a><span class="k">class</span> <span class="nc">Divide</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter to divide other parameter&#39;s results with.</span>

<span class="sd">    This parameter will automatically prevent division by zero (uses 1.0)</span>
<span class="sd">    as the denominator in these cases.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Other parameter which&#39;s sampled values are to be</span>
<span class="sd">        divided.</span>

<span class="sd">    val : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Denominator to use. If this is a StochasticParameter, either</span>
<span class="sd">        a single or multiple values will be sampled and used as the</span>
<span class="sd">        denominator(s).</span>

<span class="sd">    elementwise : bool, optional(default=False)</span>
<span class="sd">        Controls the sampling behaviour when `val` is a StochasticParameter.</span>
<span class="sd">        If set to False, a single value will be sampled from val and used as</span>
<span class="sd">        the constant denominator.</span>
<span class="sd">        If set to True and `_draw_samples(size=S)` is called, `S` values will</span>
<span class="sd">        be sampled from `val` and used as the elementwise denominators for the</span>
<span class="sd">        results of `other_param`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Divide(Uniform(0.0, 1.0), 2)</span>

<span class="sd">    Converts a uniform range [0.0, 1.0) to [0, 0.5).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">elementwise</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Divide</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="s2">&quot;other_param&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="s2">&quot;val&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="o">=</span> <span class="n">elementwise</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">seed</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span>

        <span class="n">elementwise</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">,</span> <span class="n">Deterministic</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">elementwise</span><span class="p">:</span>
            <span class="n">val_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span>
                <span class="n">size</span><span class="p">,</span>
                <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># prevent division by zero</span>
            <span class="n">val_samples</span><span class="p">[</span><span class="n">val_samples</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span>
                <span class="n">force_np_float_dtype</span><span class="p">(</span><span class="n">samples</span><span class="p">),</span>
                <span class="n">force_np_float_dtype</span><span class="p">(</span><span class="n">val_samples</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val_sample</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span>
                <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># prevent division by zero</span>
            <span class="k">if</span> <span class="n">val_sample</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">val_sample</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="k">return</span> <span class="n">force_np_float_dtype</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">val_sample</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Divide(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span><span class="p">)</span></div>

<div class="viewcode-block" id="Add"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Add">[docs]</a><span class="k">class</span> <span class="nc">Add</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter to add to other parameter&#39;s results.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Other parameter which&#39;s sampled values are to be</span>
<span class="sd">        modified.</span>

<span class="sd">    val : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Value to add to the other parameter&#39;s results. If this is a</span>
<span class="sd">        StochasticParameter, either a single or multiple values will be</span>
<span class="sd">        sampled and added.</span>

<span class="sd">    elementwise : bool, optional(default=False)</span>
<span class="sd">        Controls the sampling behaviour when `val` is a StochasticParameter.</span>
<span class="sd">        If set to False, a single value will be sampled from val and added</span>
<span class="sd">        to all values generated by `other_param`.</span>
<span class="sd">        If set to True and `_draw_samples(size=S)` is called, `S` values will</span>
<span class="sd">        be sampled from `val` and added to the results of `other_param`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Add(Uniform(0.0, 1.0), 1.0)</span>

<span class="sd">    Converts a uniform range [0.0, 1.0) to [1.0, 2.0).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">elementwise</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Add</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="s2">&quot;other_param&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="s2">&quot;val&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="o">=</span> <span class="n">elementwise</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">seed</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span>

        <span class="n">elementwise</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">,</span> <span class="n">Deterministic</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">elementwise</span><span class="p">:</span>
            <span class="n">val_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">elementwise</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">val_samples</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">samples</span> <span class="o">+</span> <span class="n">val_samples</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Add(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span><span class="p">)</span></div>

<div class="viewcode-block" id="Subtract"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Subtract">[docs]</a><span class="k">class</span> <span class="nc">Subtract</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter to subtract from another parameter&#39;s results.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Other parameter which&#39;s sampled values are to be</span>
<span class="sd">        modified.</span>

<span class="sd">    val : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Value to add to the other parameter&#39;s results. If this is a</span>
<span class="sd">        StochasticParameter, either a single or multiple values will be</span>
<span class="sd">        sampled and subtracted.</span>

<span class="sd">    elementwise : bool, optional(default=False)</span>
<span class="sd">        Controls the sampling behaviour when `val` is a StochasticParameter.</span>
<span class="sd">        If set to False, a single value will be sampled from val and subtracted</span>
<span class="sd">        from all values generated by `other_param`.</span>
<span class="sd">        If set to True and `_draw_samples(size=S)` is called, `S` values will</span>
<span class="sd">        be sampled from `val` and subtracted from the results of `other_param`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Add(Uniform(0.0, 1.0), 1.0)</span>

<span class="sd">    Converts a uniform range [0.0, 1.0) to [1.0, 2.0).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">elementwise</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Subtract</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="s2">&quot;other_param&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="s2">&quot;val&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="o">=</span> <span class="n">elementwise</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">seed</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span>

        <span class="n">elementwise</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">,</span> <span class="n">Deterministic</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">elementwise</span><span class="p">:</span>
            <span class="n">val_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">elementwise</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">val_samples</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">samples</span> <span class="o">-</span> <span class="n">val_samples</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Subtract(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span><span class="p">)</span></div>

<div class="viewcode-block" id="Power"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Power">[docs]</a><span class="k">class</span> <span class="nc">Power</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter to exponentiate another parameter&#39;s results with.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Other parameter which&#39;s sampled values are to be</span>
<span class="sd">        modified.</span>

<span class="sd">    val : number or tuple of two number or list of number or StochasticParameter</span>
<span class="sd">        Value to use exponentiate the other parameter&#39;s results with. If this</span>
<span class="sd">        is a StochasticParameter, either a single or multiple values will be</span>
<span class="sd">        sampled and used as the exponents.</span>

<span class="sd">    elementwise : bool, optional(default=False)</span>
<span class="sd">        Controls the sampling behaviour when `val` is a StochasticParameter.</span>
<span class="sd">        If set to False, a single value will be sampled from val and used as</span>
<span class="sd">        the exponent for all values generated by `other_param`.</span>
<span class="sd">        If set to True and `_draw_samples(size=S)` is called, `S` values will</span>
<span class="sd">        be sampled from `val` and used as the exponents for the results of</span>
<span class="sd">        `other_param`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Power(Uniform(0.0, 1.0), 2)</span>

<span class="sd">    Converts a uniform range [0.0, 1.0) to a distribution that is peaked</span>
<span class="sd">    towards 1.0.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">elementwise</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Power</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="s2">&quot;other_param&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="s2">&quot;val&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="o">=</span> <span class="n">elementwise</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">seed</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span>

        <span class="n">elementwise</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">,</span> <span class="n">Deterministic</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">elementwise</span><span class="p">:</span>
            <span class="n">exponents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exponents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>

        <span class="c1"># without this we get int results in the case of</span>
        <span class="c1"># Power(&lt;int&gt;, &lt;stochastic float param&gt;)</span>
        <span class="n">samples</span><span class="p">,</span> <span class="n">exponents</span> <span class="o">=</span> <span class="n">both_np_float_if_one_is_float</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">exponents</span><span class="p">)</span>
        <span class="n">samples_dtype</span> <span class="o">=</span> <span class="n">samples</span><span class="o">.</span><span class="n">dtype</span>

        <span class="c1"># float_power requires numpy&gt;=1.12</span>
        <span class="c1">#result = np.float_power(samples, exponents)</span>
        <span class="c1"># TODO why was float32 type here replaced with complex number</span>
        <span class="c1"># formulation?</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">samples</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">complex</span><span class="p">),</span> <span class="n">exponents</span><span class="p">)</span><span class="o">.</span><span class="n">real</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">dtype</span> <span class="o">!=</span> <span class="n">samples_dtype</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">samples_dtype</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Power(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span><span class="p">)</span></div>

<div class="viewcode-block" id="Absolute"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Absolute">[docs]</a><span class="k">class</span> <span class="nc">Absolute</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts another parameter&#39;s results to absolute values.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : StochasticParameter</span>
<span class="sd">        Other parameter which&#39;s sampled values are to be</span>
<span class="sd">        modified.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Absolute(Uniform(-1.0, 1.0))</span>

<span class="sd">    Converts a uniform range [-1.0, 1.0) to [0.0, 1.0].</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Absolute</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">other_param</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">opstr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Absolute(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">opstr</span><span class="p">,)</span></div>

<div class="viewcode-block" id="RandomSign"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.RandomSign">[docs]</a><span class="k">class</span> <span class="nc">RandomSign</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts another parameter&#39;s results randomly to positive or negative</span>
<span class="sd">    values.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : StochasticParameter</span>
<span class="sd">        Other parameter which&#39;s sampled values are to be</span>
<span class="sd">        modified.</span>

<span class="sd">    p_positive : number</span>
<span class="sd">        Fraction of values that are supposed to be turned to positive</span>
<span class="sd">        values.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = RandomSign(Poisson(1))</span>

<span class="sd">    Generates a poisson distribution with alpha=1 that is mirrored at the</span>
<span class="sd">    y-axis.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">,</span> <span class="n">p_positive</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">RandomSign</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">))</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">p_positive</span><span class="p">))</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">p_positive</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">other_param</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p_positive</span> <span class="o">=</span> <span class="n">p_positive</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span>
            <span class="n">size</span><span class="p">,</span>
            <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">copy_random_state</span><span class="p">(</span><span class="n">random_state</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">coinflips</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">copy_random_state</span><span class="p">(</span><span class="n">random_state</span><span class="p">)</span><span class="o">.</span><span class="n">binomial</span><span class="p">(</span>
            <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_positive</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span>
        <span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
        <span class="n">signs</span> <span class="o">=</span> <span class="n">coinflips</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="c1"># Add absolute here to guarantee that we get p_positive percent of</span>
        <span class="c1"># positive values. Otherwise we would merely flip p_positive percent</span>
        <span class="c1"># of all signs.</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span> <span class="o">*</span> <span class="n">signs</span>
        <span class="c1">#print(&quot;[RandomSign] &quot;, size, coinflips.shape, signs.shape, result.shape, result[0:10])</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">opstr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;RandomSign(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%.2f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">opstr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p_positive</span><span class="p">)</span></div>

<div class="viewcode-block" id="ForceSign"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.ForceSign">[docs]</a><span class="k">class</span> <span class="nc">ForceSign</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts another parameter&#39;s results to positive or negative values.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : StochasticParameter</span>
<span class="sd">        Other parameter which&#39;s sampled values are to be</span>
<span class="sd">        modified.</span>

<span class="sd">    positive : bool</span>
<span class="sd">        Whether to force all signs to be positive/+ (True) or</span>
<span class="sd">        negative/- (False).</span>

<span class="sd">    mode : string, optional(default=&quot;invert&quot;)</span>
<span class="sd">        How to change the signs. Valid values are &quot;invert&quot; and &quot;reroll&quot;.</span>
<span class="sd">        &quot;invert&quot; means that wrong signs are simply flipped.</span>
<span class="sd">        &quot;reroll&quot; means that all samples with wrong signs are sampled again,</span>
<span class="sd">        optionally many times, until they randomly end up having the correct</span>
<span class="sd">        sign.</span>

<span class="sd">    reroll_count_max : int, optional(default=2)</span>
<span class="sd">        If `mode` is set to &quot;reroll&quot;, this determines how often values may</span>
<span class="sd">        be rerolled before giving up and simply flipping the sign (as in</span>
<span class="sd">        mode=&quot;invert&quot;). This shouldn&#39;t be set too high, as rerolling is</span>
<span class="sd">        expensive.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = ForceSign(Poisson(1), positive=False)</span>

<span class="sd">    Generates a poisson distribution with alpha=1 that is flipped towards</span>
<span class="sd">    negative values.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">,</span> <span class="n">positive</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;invert&quot;</span><span class="p">,</span> <span class="n">reroll_count_max</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ForceSign</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">other_param</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">positive</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">positive</span> <span class="o">=</span> <span class="n">positive</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">mode</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;invert&quot;</span><span class="p">,</span> <span class="s2">&quot;reroll&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">ia</span><span class="o">.</span><span class="n">is_single_integer</span><span class="p">(</span><span class="n">reroll_count_max</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reroll_count_max</span> <span class="o">=</span> <span class="n">reroll_count_max</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">seed</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span>
            <span class="n">size</span><span class="p">,</span>
            <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;invert&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">positive</span><span class="p">:</span>
                <span class="n">samples</span><span class="p">[</span><span class="n">samples</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">samples</span><span class="p">[</span><span class="n">samples</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">positive</span><span class="p">:</span>
                <span class="n">bad_samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">samples</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bad_samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">samples</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">reroll_count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">bad_samples</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">reroll_count</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">reroll_count_max</span><span class="p">:</span>
                <span class="c1"># This rerolls the full input size, even when only a tiny</span>
                <span class="c1"># fraction of the values were wrong. That is done, because not</span>
                <span class="c1"># all parameters necessarily support any number of dimensions</span>
                <span class="c1"># for `size`, so we cant just resample size=N for N values</span>
                <span class="c1"># with wrong signs.</span>
                <span class="c1"># There is still quite some room for improvement here.</span>
                <span class="n">samples_reroll</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span>
                    <span class="n">size</span><span class="p">,</span>
                    <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">reroll_count</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">samples</span><span class="p">[</span><span class="n">bad_samples</span><span class="p">]</span> <span class="o">=</span> <span class="n">samples_reroll</span><span class="p">[</span><span class="n">bad_samples</span><span class="p">]</span>

                <span class="n">reroll_count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">positive</span><span class="p">:</span>
                    <span class="n">bad_samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">samples</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">bad_samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">samples</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bad_samples</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">samples</span><span class="p">[</span><span class="n">bad_samples</span><span class="p">]</span> <span class="o">*=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">samples</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">opstr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;ForceSign(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%d</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">opstr</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">positive</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reroll_count_max</span><span class="p">)</span></div>

<div class="viewcode-block" id="Positive"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Positive">[docs]</a><span class="k">def</span> <span class="nf">Positive</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;invert&quot;</span><span class="p">,</span> <span class="n">reroll_count_max</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts another parameter&#39;s results to positive values.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : StochasticParameter</span>
<span class="sd">        Other parameter which&#39;s sampled values are to be</span>
<span class="sd">        modified.</span>

<span class="sd">    mode : string, optional(default=&quot;invert&quot;)</span>
<span class="sd">        How to change the signs. Valid values are &quot;invert&quot; and &quot;reroll&quot;.</span>
<span class="sd">        &quot;invert&quot; means that wrong signs are simply flipped.</span>
<span class="sd">        &quot;reroll&quot; means that all samples with wrong signs are sampled again,</span>
<span class="sd">        optionally many times, until they randomly end up having the correct</span>
<span class="sd">        sign.</span>

<span class="sd">    reroll_count_max : int, optional(default=2)</span>
<span class="sd">        If `mode` is set to &quot;reroll&quot;, this determines how often values may</span>
<span class="sd">        be rerolled before giving up and simply flipping the sign (as in</span>
<span class="sd">        mode=&quot;invert&quot;). This shouldn&#39;t be set too high, as rerolling is</span>
<span class="sd">        expensive.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Positive(Normal(0, 1), mode=&quot;reroll&quot;)</span>

<span class="sd">    Generates a normal distribution that has only positive values.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ForceSign</span><span class="p">(</span>
        <span class="n">other_param</span><span class="o">=</span><span class="n">other_param</span><span class="p">,</span>
        <span class="n">positive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
        <span class="n">reroll_count_max</span><span class="o">=</span><span class="n">reroll_count_max</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="Negative"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Negative">[docs]</a><span class="k">def</span> <span class="nf">Negative</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;invert&quot;</span><span class="p">,</span> <span class="n">reroll_count_max</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts another parameter&#39;s results to negative values.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : StochasticParameter</span>
<span class="sd">        Other parameter which&#39;s sampled values are to be</span>
<span class="sd">        modified.</span>

<span class="sd">    mode : string, optional(default=&quot;invert&quot;)</span>
<span class="sd">        How to change the signs. Valid values are &quot;invert&quot; and &quot;reroll&quot;.</span>
<span class="sd">        &quot;invert&quot; means that wrong signs are simply flipped.</span>
<span class="sd">        &quot;reroll&quot; means that all samples with wrong signs are sampled again,</span>
<span class="sd">        optionally many times, until they randomly end up having the correct</span>
<span class="sd">        sign.</span>

<span class="sd">    reroll_count_max : int, optional(default=2)</span>
<span class="sd">        If `mode` is set to &quot;reroll&quot;, this determines how often values may</span>
<span class="sd">        be rerolled before giving up and simply flipping the sign (as in</span>
<span class="sd">        mode=&quot;invert&quot;). This shouldn&#39;t be set too high, as rerolling is</span>
<span class="sd">        expensive.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Negative(Normal(0, 1), mode=&quot;reroll&quot;)</span>

<span class="sd">    Generates a normal distribution that has only negative values.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ForceSign</span><span class="p">(</span>
        <span class="n">other_param</span><span class="o">=</span><span class="n">other_param</span><span class="p">,</span>
        <span class="n">positive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
        <span class="n">reroll_count_max</span><span class="o">=</span><span class="n">reroll_count_max</span>
    <span class="p">)</span></div>

<span class="c1"># TODO this always aggregates the result in high resolution space,</span>
<span class="c1"># instead of aggregating them in low resolution and then only upscaling the</span>
<span class="c1"># final image (for N iterations that would save up to N-1 upscales)</span>
<div class="viewcode-block" id="IterativeNoiseAggregator"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.IterativeNoiseAggregator">[docs]</a><span class="k">class</span> <span class="nc">IterativeNoiseAggregator</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter to generate noise maps in multiple iterations and aggregate</span>
<span class="sd">    their results.</span>

<span class="sd">    This is supposed to be used in conjunction with SimplexNoise or</span>
<span class="sd">    FrequencyNoise.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : StochasticParameter</span>
<span class="sd">        The noise parameter to iterate multiple</span>
<span class="sd">        times.</span>

<span class="sd">    iterations : int or iterable of two ints or list of ints or StochasticParameter, optional(default=(1, 3))</span>
<span class="sd">        The number of iterations. This may be a single integer or a tuple</span>
<span class="sd">        of integers (a, b), which will result in [a..b] iterations or</span>
<span class="sd">        a list of integers [a, b, c, ...], which will result in a or b or</span>
<span class="sd">        c, ... iterations. It may also be a StochasticParameter, in which case</span>
<span class="sd">        the number of iterations will be sampled once per call</span>
<span class="sd">        to `_draw_samples()`.</span>

<span class="sd">    aggregation_method : ia.ALL or string or list of string or StochasticParameter, optional(default=[&quot;max&quot;, &quot;avg&quot;])</span>
<span class="sd">        The method to use to aggregate the results of multiple iterations.</span>
<span class="sd">        If a string, it must have the value &quot;min&quot; or &quot;max&quot; or &quot;avg&quot;.</span>
<span class="sd">        If &quot;min&quot; is chosen, the elementwise minimum will be computed over</span>
<span class="sd">        all iterations (pushing the noise towards zeros). &quot;max&quot; will result</span>
<span class="sd">        in the elementwise maximum and &quot;avg&quot; in the average over all</span>
<span class="sd">        iterations. If `ia.ALL` is used, it will be randomly either min or max</span>
<span class="sd">        or avg (per call to `_draw_samples()`). If a list is chosen, it must</span>
<span class="sd">        contain the mentioned strings and a random one will be picked per call</span>
<span class="sd">        to `_draw_samples()`. If a StochasticParameter is used, a value will</span>
<span class="sd">        be sampled from it per call to `_draw_samples()`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; noise = IterativeNoiseAggregator(SimplexNoise(), iterations=(2, 5), aggregation_method=&quot;max&quot;)</span>

<span class="sd">    Generates per call 2 to 5 times simplex noise of a given size. Then</span>
<span class="sd">    combines these noise maps to a single map using elementwise maximum.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">aggregation_method</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;avg&quot;</span><span class="p">]):</span> <span class="c1"># pylint: disable=locally-disabled, dangerous-default-value, line-too-long</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">other_param</span>

        <span class="k">if</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_single_integer</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">iterations</span> <span class="o">&lt;=</span> <span class="mi">1000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">=</span> <span class="n">Deterministic</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iterations</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">all</span><span class="p">([</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">val</span> <span class="o">&lt;=</span> <span class="mi">10000</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">iterations</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">=</span> <span class="n">Choice</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_iterable</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">all</span><span class="p">([</span><span class="n">ia</span><span class="o">.</span><span class="n">is_single_integer</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">iterations</span><span class="p">]))</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">all</span><span class="p">([</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">val</span> <span class="o">&lt;=</span> <span class="mi">10000</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">iterations</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">=</span> <span class="n">DiscreteUniform</span><span class="p">(</span><span class="n">iterations</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">iterations</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iterations</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">=</span> <span class="n">iterations</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected iterations to be int or tuple of two ints or StochasticParameter, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">iterations</span><span class="p">),))</span>

        <span class="k">if</span> <span class="n">aggregation_method</span> <span class="o">==</span> <span class="n">ia</span><span class="o">.</span><span class="n">ALL</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">aggregation_method</span> <span class="o">=</span> <span class="n">Choice</span><span class="p">([</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;avg&quot;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">aggregation_method</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">aggregation_method</span> <span class="o">=</span> <span class="n">Deterministic</span><span class="p">(</span><span class="n">aggregation_method</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">aggregation_method</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">aggregation_method</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">all</span><span class="p">([</span><span class="n">ia</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">aggregation_method</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">aggregation_method</span> <span class="o">=</span> <span class="n">Choice</span><span class="p">(</span><span class="n">aggregation_method</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">aggregation_method</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">aggregation_method</span> <span class="o">=</span> <span class="n">aggregation_method</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected aggregation_method to be string or list of strings or StochasticParameter, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">aggregation_method</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="c1">#ia.do_assert(len(size) == 2, &quot;Expected requested other_param to have shape (H, W), got shape %s.&quot; % (size,))</span>
        <span class="c1">#h, w = size</span>

        <span class="n">seed</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span>
        <span class="n">aggregation_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aggregation_method</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span>
        <span class="n">iterations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">iterations</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1">#result = np.zeros((h, w), dtype=np.float32)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sm</span><span class="o">.</span><span class="n">xrange</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
            <span class="c1">#noise_iter = self.other_param.draw_samples((h, w), random_state=ia.new_random_state(seed+2+i))</span>
            <span class="n">noise_iter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">2</span><span class="o">+</span><span class="n">i</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">aggregation_method</span> <span class="o">==</span> <span class="s2">&quot;avg&quot;</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="n">noise_iter</span>
            <span class="k">elif</span> <span class="n">aggregation_method</span> <span class="o">==</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">noise_iter</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">noise_iter</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="c1"># self.aggregation_method == &quot;max&quot;</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">noise_iter</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">noise_iter</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">aggregation_method</span> <span class="o">==</span> <span class="s2">&quot;avg&quot;</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">/</span> <span class="n">iterations</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">opstr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;IterativeNoiseAggregator(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">opstr</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iterations</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aggregation_method</span><span class="p">))</span></div>

<div class="viewcode-block" id="Sigmoid"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Sigmoid">[docs]</a><span class="k">class</span> <span class="nc">Sigmoid</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Applies a sigmoid function to the outputs of another parameter.</span>

<span class="sd">    This is intended to be used in combination with SimplexNoise or</span>
<span class="sd">    FrequencyNoise. It pushes the noise values away from ~0.5 and towards</span>
<span class="sd">    0.0 or 1.0, making the noise maps more binary.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    other_param : StochasticParameter</span>
<span class="sd">        The other parameter to which the sigmoid will be</span>
<span class="sd">        applied.</span>

<span class="sd">    threshold : number or tuple of two numbers or iterable of numbers or StochasticParameter, optional(default=(-10, 10))</span>
<span class="sd">        Sets the value of the sigmoid&#39;s saddle point, i.e. where values</span>
<span class="sd">        start to quickly shift from 0.0 to 1.0.</span>
<span class="sd">        This may be set using a single number, a tuple (a, b) (will result in</span>
<span class="sd">        a random threshold a&lt;=x&lt;b per call), a list of numbers (will</span>
<span class="sd">        result in a random threshold drawn from the list per call) or a</span>
<span class="sd">        StochasticParameter (will be queried once per call to determine the</span>
<span class="sd">        threshold).</span>

<span class="sd">    activated : bool or number, optional(default=True)</span>
<span class="sd">        Defines whether the sigmoid is activated. If this is False, the</span>
<span class="sd">        results of other_param will not be altered. This may be set to a</span>
<span class="sd">        float value p with 0&lt;=p&lt;=1.0, which will result in `activated` being</span>
<span class="sd">        True in p percent of all calls.</span>

<span class="sd">    mul : number, optional(default=1)</span>
<span class="sd">        The results of other_param will be multiplied with this value before</span>
<span class="sd">        applying the sigmoid. For noise values (range [0.0, 1.0]) this should</span>
<span class="sd">        be set to about 20.</span>

<span class="sd">    add : number, optional(default=0)</span>
<span class="sd">        This value will be added to the results of other_param before applying</span>
<span class="sd">        the sigmoid. For noise values (range [0.0, 1.0]) this should be set</span>
<span class="sd">        to about -10.0, provided `mul` was set to 20.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = Sigmoid(SimplexNoise(), activated=0.5, mul=20, add=-10)</span>

<span class="sd">    Applies a sigmoid to simplex noise in 50 percent of all calls. The noise</span>
<span class="sd">    results are modified to match the sigmoid&#39;s expected value range. The</span>
<span class="sd">    sigmoid&#39;s outputs are in the range [0.0, 1.0].</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_param</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">activated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mul</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span> <span class="o">=</span> <span class="n">other_param</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="s2">&quot;threshold&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">activated</span> <span class="o">=</span> <span class="n">handle_probability_param</span><span class="p">(</span><span class="n">activated</span><span class="p">,</span> <span class="s2">&quot;activated&quot;</span><span class="p">)</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">mul</span><span class="p">))</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">mul</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mul</span> <span class="o">=</span> <span class="n">mul</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="n">ia</span><span class="o">.</span><span class="n">is_single_number</span><span class="p">(</span><span class="n">add</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span> <span class="o">=</span> <span class="n">add</span>

<div class="viewcode-block" id="Sigmoid.create_for_noise"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.Sigmoid.create_for_noise">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">create_for_noise</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">activated</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a Sigmoid that is adjusted to be used with noise parameters,</span>
<span class="sd">        i.e. with parameters which&#39;s output values are in the range [0.0, 1.0].</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other_param : StochasticParameter</span>
<span class="sd">            See `Sigmoid`.</span>

<span class="sd">        threshold : number or tuple of two numbers or iterable of numbers or StochasticParameter, optional(default=(-10, 10))</span>
<span class="sd">            See `Sigmoid`.</span>

<span class="sd">        activated : bool or number, optional(default=True)</span>
<span class="sd">            See `Sigmoid`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        out : Sigmoid</span>
<span class="sd">            A sigmoid adjusted to be used with noise.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Sigmoid</span><span class="p">(</span><span class="n">other_param</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">activated</span><span class="p">,</span> <span class="n">mul</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">add</span><span class="o">=-</span><span class="mi">10</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">seed</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span>
        <span class="n">activated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">activated</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">2</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">activated</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
            <span class="c1"># threshold must be subtracted here, not added</span>
            <span class="c1"># higher threshold = move threshold of sigmoid towards the right</span>
            <span class="c1">#                  = make it harder to pass the threshold</span>
            <span class="c1">#                  = more 0.0s / less 1.0s</span>
            <span class="c1"># by subtracting a high value, it moves each x towards the left,</span>
            <span class="c1"># leading to more values being left of the threshold, leading</span>
            <span class="c1"># to more 0.0s</span>
            <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">result</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">mul</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span> <span class="o">-</span> <span class="n">threshold</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">opstr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">other_param</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Sigmoid(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">opstr</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">activated</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mul</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">))</span></div>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">class SimplexNoise(StochasticParameter):</span>
<span class="sd">    def __init__(self, iterations=(1, 3), size_px_max=(2, 16), upscale_method=[&quot;linear&quot;, &quot;nearest&quot;], aggregation_method=[&quot;max&quot;, &quot;avg&quot;], sigmoid=0.5, sigmoid_thresh=(-10, 10)):</span>
<span class="sd">        if ia.is_single_integer(iterations):</span>
<span class="sd">            assert 1 &lt;= iterations &lt;= 1000</span>
<span class="sd">            self.iterations = Deterministic(iterations)</span>
<span class="sd">        elif ia.is_iterable(iterations):</span>
<span class="sd">            assert len(iterations) == 2</span>
<span class="sd">            assert all([ia.is_single_integer(val) for val in iterations])</span>
<span class="sd">            assert all([1 &lt;= val &lt;= 10000 for val in iterations])</span>
<span class="sd">            self.iterations = DiscreteUniform(iterations[0], iterations[1])</span>
<span class="sd">        elif ia.is_iterable(iterations):</span>
<span class="sd">            assert len(iterations) &gt; 0</span>
<span class="sd">            assert all([1 &lt;= val &lt;= 10000 for val in iterations])</span>
<span class="sd">            self.iterations = Choice(iterations)</span>
<span class="sd">        elif isinstance(iterations, StochasticParameter):</span>
<span class="sd">            self.iterations = iterations</span>
<span class="sd">        else:</span>
<span class="sd">            raise Exception(&quot;Expected iterations to be int or tuple of two ints or StochasticParameter, got %s.&quot; % (type(iterations),))</span>

<span class="sd">        if ia.is_single_integer(size_px_max):</span>
<span class="sd">            assert 1 &lt;= size_px_max &lt;= 10000</span>
<span class="sd">            self.size_px_max = Deterministic(size_px_max)</span>
<span class="sd">        elif isinstance(size_px_max, tuple):</span>
<span class="sd">            assert len(size_px_max) == 2</span>
<span class="sd">            assert all([ia.is_single_integer(val) for val in size_px_max])</span>
<span class="sd">            assert all([1 &lt;= val &lt;= 10000 for val in size_px_max])</span>
<span class="sd">            self.size_px_max = DiscreteUniform(size_px_max[0], size_px_max[1])</span>
<span class="sd">        elif ia.is_iterable(size_px_max):</span>
<span class="sd">            assert len(size_px_max) &gt; 0</span>
<span class="sd">            assert all([1 &lt;= val &lt;= 10000 for val in size_px_max])</span>
<span class="sd">            self.size_px_max = Choice(size_px_max)</span>
<span class="sd">        elif isinstance(size_px_max, StochasticParameter):</span>
<span class="sd">            self.size_px_max = size_px_max</span>
<span class="sd">        else:</span>
<span class="sd">            raise Exception(&quot;Expected size_px_max to be int or tuple of two ints or StochasticParameter, got %s.&quot; % (type(size_px_max),))</span>

<span class="sd">        if upscale_method == ia.ALL:</span>
<span class="sd">            self.upscale_method = Choice([&quot;nearest&quot;, &quot;linear&quot;, &quot;area&quot;, &quot;cubic&quot;])</span>
<span class="sd">        elif ia.is_string(upscale_method):</span>
<span class="sd">            self.upscale_method = Deterministic(upscale_method)</span>
<span class="sd">        elif isinstance(upscale_method, list):</span>
<span class="sd">            assert len(upscale_method) &gt;= 1</span>
<span class="sd">            assert all([ia.is_string(val) for val in upscale_method])</span>
<span class="sd">            self.upscale_method = Choice(upscale_method)</span>
<span class="sd">        elif isinstance(upscale_method, StochasticParameter):</span>
<span class="sd">            self.upscale_method = upscale_method</span>
<span class="sd">        else:</span>
<span class="sd">            raise Exception(&quot;Expected upscale_method to be string or list of strings or StochasticParameter, got %s.&quot; % (type(upscale_method),))</span>

<span class="sd">        if aggregation_method == ia.ALL:</span>
<span class="sd">            self.aggregation_method = Choice([&quot;min&quot;, &quot;max&quot;, &quot;avg&quot;])</span>
<span class="sd">        elif ia.is_string(aggregation_method):</span>
<span class="sd">            self.aggregation_method = Deterministic(aggregation_method)</span>
<span class="sd">        elif isinstance(aggregation_method, list):</span>
<span class="sd">            assert len(aggregation_method) &gt;= 1</span>
<span class="sd">            assert all([ia.is_string(val) for val in aggregation_method])</span>
<span class="sd">            self.aggregation_method = Choice(aggregation_method)</span>
<span class="sd">        elif isinstance(aggregation_method, StochasticParameter):</span>
<span class="sd">            self.aggregation_method = aggregation_method</span>
<span class="sd">        else:</span>
<span class="sd">            raise Exception(&quot;Expected aggregation_method to be string or list of strings or StochasticParameter, got %s.&quot; % (type(aggregation_method),))</span>

<span class="sd">        if sigmoid in [True, False, 0, 1, 0.0, 1.0]:</span>
<span class="sd">            self.sigmoid = Deterministic(int(sigmoid))</span>
<span class="sd">        elif ia.is_single_number(sigmoid):</span>
<span class="sd">            assert 0 &lt;= sigmoid &lt;= 1.0</span>
<span class="sd">            self.sigmoid = Binomial(sigmoid)</span>
<span class="sd">        else:</span>
<span class="sd">            raise Exception(&quot;Expected sigmoid to be boolean or number or StochasticParameter, got %s.&quot; % (type(sigmoid),))</span>

<span class="sd">        if ia.is_single_number(sigmoid_thresh):</span>
<span class="sd">            self.sigmoid_thresh = Deterministic(sigmoid_thresh)</span>
<span class="sd">        elif isinstance(sigmoid_thresh, tuple):</span>
<span class="sd">            assert len(sigmoid_thresh) == 2</span>
<span class="sd">            assert all([ia.is_single_number(val) for val in sigmoid_thresh])</span>
<span class="sd">            self.sigmoid_thresh = Uniform(sigmoid_thresh[0], sigmoid_thresh[1])</span>
<span class="sd">        elif ia.is_iterable(sigmoid_thresh):</span>
<span class="sd">            assert len(sigmoid_thresh) &gt; 0</span>
<span class="sd">            self.sigmoid_thresh = Choice(sigmoid_thresh)</span>
<span class="sd">        elif isinstance(sigmoid_thresh, StochasticParameter):</span>
<span class="sd">            self.sigmoid_thresh = sigmoid_thresh</span>
<span class="sd">        else:</span>
<span class="sd">            raise Exception(&quot;Expected sigmoid_thresh to be number or tuple of two numbers or StochasticParameter, got %s.&quot; % (type(sigmoid_thresh),))</span>

<span class="sd">    def _draw_samples(self, size, random_state):</span>
<span class="sd">        assert len(size) == 2, &quot;Expected requested noise to have shape (H, W), got shape %s.&quot; % (size,)</span>
<span class="sd">        h, w = size</span>
<span class="sd">        seed = random_state.randint(0, 10**6)</span>
<span class="sd">        aggregation_method = self.aggregation_method.draw_sample(random_state=ia.new_random_state(seed))</span>
<span class="sd">        iterations = self.iterations.draw_sample(random_state=ia.new_random_state(seed+1))</span>
<span class="sd">        upscale_methods = self.upscale_method.draw_samples((iterations,), random_state=ia.new_random_state(seed+2))</span>
<span class="sd">        result = np.zeros((h, w), dtype=np.float32)</span>
<span class="sd">        for i in sm.xrange(iterations):</span>
<span class="sd">            noise_iter = self._draw_samples_iteration(h, w, seed + 10 + i, upscale_methods[i])</span>
<span class="sd">            if aggregation_method == &quot;avg&quot;:</span>
<span class="sd">                result += noise_iter</span>
<span class="sd">            elif aggregation_method == &quot;min&quot;:</span>
<span class="sd">                if i == 0:</span>
<span class="sd">                    result = noise_iter</span>
<span class="sd">                else:</span>
<span class="sd">                    result = np.minimum(result, noise_iter)</span>
<span class="sd">            else: # self.aggregation_method == &quot;max&quot;</span>
<span class="sd">                if i == 0:</span>
<span class="sd">                    result = noise_iter</span>
<span class="sd">                else:</span>
<span class="sd">                    result = np.maximum(result, noise_iter)</span>

<span class="sd">        if aggregation_method == &quot;avg&quot;:</span>
<span class="sd">            result = result / iterations</span>

<span class="sd">        sigmoid = self.sigmoid.draw_sample(random_state=ia.new_random_state(seed+3))</span>
<span class="sd">        sigmoid_thresh = self.sigmoid_thresh.draw_sample(random_state=ia.new_random_state(seed+4))</span>
<span class="sd">        if sigmoid &gt; 0.5:</span>
<span class="sd">            # yes, threshold must be subtracted here, not added</span>
<span class="sd">            # higher threshold = move threshold of sigmoid towards the right</span>
<span class="sd">            #                  = make it harder to pass the threshold</span>
<span class="sd">            #                  = more 0.0s / less 1.0s</span>
<span class="sd">            # by subtracting a high value, it moves each x towards the left,</span>
<span class="sd">            # leading to more values being left of the threshold, leading</span>
<span class="sd">            # to more 0.0s</span>
<span class="sd">            result = 1 / (1 + np.exp(-(result * 20 - 10 - sigmoid_thresh)))</span>

<span class="sd">        #from scipy import misc</span>
<span class="sd">        #misc.imshow((result * 255).astype(np.uint8))</span>

<span class="sd">        return result</span>

<span class="sd">    def _draw_samples_iteration(self, h, w, seed, upscale_method):</span>
<span class="sd">        maxlen = max(h, w)</span>
<span class="sd">        size_px_max = self.size_px_max.draw_sample(random_state=ia.new_random_state(seed))</span>
<span class="sd">        if maxlen &gt; size_px_max:</span>
<span class="sd">            downscale_factor = size_px_max / maxlen</span>
<span class="sd">            h_small = int(h * downscale_factor)</span>
<span class="sd">            w_small = int(w * downscale_factor)</span>
<span class="sd">        else:</span>
<span class="sd">            h_small = h</span>
<span class="sd">            w_small = w</span>

<span class="sd">        # don&#39;t go below Hx1 or 1xW</span>
<span class="sd">        h_small = max(h_small, 1)</span>
<span class="sd">        w_small = max(w_small, 1)</span>

<span class="sd">        generator = OpenSimplex(seed=seed)</span>
<span class="sd">        noise = np.zeros((h_small, w_small), dtype=np.float32)</span>
<span class="sd">        for y in sm.xrange(h_small):</span>
<span class="sd">            for x in sm.xrange(w_small):</span>
<span class="sd">                noise[y, x] = generator.noise2d(y=y, x=x)</span>
<span class="sd">        noise_0to1 = (noise + 0.5) / 2</span>

<span class="sd">        if noise_0to1.shape != (h, w):</span>
<span class="sd">            noise_0to1_uint8 = (noise_0to1 * 255).astype(np.uint8)</span>
<span class="sd">            noise_0to1_3d = np.tile(noise_0to1_uint8[..., np.newaxis], (1, 1, 3))</span>
<span class="sd">            noise_0to1 = ia.imresize_single_image(noise_0to1_3d, (h, w), interpolation=upscale_method)</span>
<span class="sd">            noise_0to1 = (noise_0to1[..., 0] / 255.0).astype(np.float32)</span>

<span class="sd">        #from scipy import misc</span>
<span class="sd">        #print(noise_0to1.shape, h_small, w_small, self.size_percent, self.size_px_max, maxlen)</span>
<span class="sd">        #misc.imshow((noise_0to1 * 255).astype(np.uint8))</span>

<span class="sd">        return noise_0to1</span>

<span class="sd">    def __repr__(self):</span>
<span class="sd">        return self.__str__()</span>

<span class="sd">    def __str__(self):</span>
<span class="sd">        return &quot;SimplexNoise(%s, %s, %s, %s, %s, %s, %s)&quot; % (</span>
<span class="sd">            str(self.iterations),</span>
<span class="sd">            str(self.size_px_max),</span>
<span class="sd">            str(self.upscale_method),</span>
<span class="sd">            str(self.aggregation_method),</span>
<span class="sd">            str(self.sigmoid),</span>
<span class="sd">            str(self.sigmoid_thresh)</span>
<span class="sd">        )</span>
<span class="sd">&quot;&quot;&quot;</span>

<div class="viewcode-block" id="SimplexNoise"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.SimplexNoise">[docs]</a><span class="k">class</span> <span class="nc">SimplexNoise</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A parameter that generates simplex noise of varying resolutions.</span>

<span class="sd">    This parameter expects to sample noise for 2d planes, i.e. for</span>
<span class="sd">    sizes (H, W) and will return a value in the range [0.0, 1.0] per location</span>
<span class="sd">    in that plane.</span>

<span class="sd">    The noise is sampled from low resolution planes and</span>
<span class="sd">    upscaled to the requested height and width. The size of the low</span>
<span class="sd">    resolution plane may be defined (high values can be slow) and the</span>
<span class="sd">    interpolation method for upscaling can be set.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    size_px_max : int or tuple of two int or list of int or StochasticParameter, optional(default=(2, 16))</span>
<span class="sd">        Size in pixels of the low resolution plane.</span>
<span class="sd">        A single int will be used as a constant value. A tuple of two</span>
<span class="sd">        ints (a, b) will result in random values sampled from [a..b].</span>
<span class="sd">        A list of ints will result in random values being sampled from that</span>
<span class="sd">        list. A StochasticParameter will be queried once per call</span>
<span class="sd">        to `_draw_samples()`.</span>

<span class="sd">    upscale_method : string or int or StochasticParameter, optional(default=&quot;nearest&quot;)</span>
<span class="sd">        Upsampling/interpolation method to use. This is used after the sampling</span>
<span class="sd">        is finished and the low resolution plane has to be upsampled to the</span>
<span class="sd">        requested `size` in `_draw_samples(size, ...)`. The method may be</span>
<span class="sd">        the same as in `imgaug.imresize_many_images()`. Usually `nearest`</span>
<span class="sd">        or `linear` are good choices. `nearest` will result in rectangles</span>
<span class="sd">        with sharp edges and `linear` in rectangles with blurry and round</span>
<span class="sd">        edges. The method may be provided as a StochasticParameter, which</span>
<span class="sd">        will be queried per call to `_draw_samples()`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = SimplexNoise(upscale_method=&quot;linear&quot;)</span>

<span class="sd">    Results in smooth simplex noise of varying sizes.</span>

<span class="sd">    &gt;&gt;&gt; param = SimplexNoise(size_px_max=(8, 16), upscale_method=&quot;nearest&quot;)</span>

<span class="sd">    Results in rectangular simplex noise of rather high detail.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size_px_max</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">upscale_method</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">,</span> <span class="s2">&quot;nearest&quot;</span><span class="p">]):</span> <span class="c1"># pylint: disable=locally-disabled, dangerous-default-value, line-too-long</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size_px_max</span> <span class="o">=</span> <span class="n">handle_discrete_param</span><span class="p">(</span><span class="n">size_px_max</span><span class="p">,</span> <span class="s2">&quot;size_px_max&quot;</span><span class="p">,</span> <span class="n">value_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">upscale_method</span> <span class="o">==</span> <span class="n">ia</span><span class="o">.</span><span class="n">ALL</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span> <span class="o">=</span> <span class="n">Choice</span><span class="p">([</span><span class="s2">&quot;nearest&quot;</span><span class="p">,</span> <span class="s2">&quot;linear&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;cubic&quot;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span> <span class="o">=</span> <span class="n">Deterministic</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">all</span><span class="p">([</span><span class="n">ia</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">upscale_method</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span> <span class="o">=</span> <span class="n">Choice</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span> <span class="o">=</span> <span class="n">upscale_method</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected upscale_method to be string or list of strings or StochasticParameter, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Expected requested noise to have shape (H, W), got shape </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">size</span><span class="p">,))</span>
        <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">size</span>
        <span class="n">seed</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span>
        <span class="n">iterations</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">aggregation_method</span> <span class="o">=</span> <span class="s2">&quot;max&quot;</span>
        <span class="n">upscale_methods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">((</span><span class="n">iterations</span><span class="p">,),</span> <span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sm</span><span class="o">.</span><span class="n">xrange</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
            <span class="n">noise_iter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_samples_iteration</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">seed</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">i</span><span class="p">,</span> <span class="n">upscale_methods</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">aggregation_method</span> <span class="o">==</span> <span class="s2">&quot;avg&quot;</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="n">noise_iter</span>
            <span class="k">elif</span> <span class="n">aggregation_method</span> <span class="o">==</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">noise_iter</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">noise_iter</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="c1"># self.aggregation_method == &quot;max&quot;</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">noise_iter</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">noise_iter</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">aggregation_method</span> <span class="o">==</span> <span class="s2">&quot;avg&quot;</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">/</span> <span class="n">iterations</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">_draw_samples_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">seed</span><span class="p">,</span> <span class="n">upscale_method</span><span class="p">):</span>
        <span class="n">maxlen</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="n">size_px_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size_px_max</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">maxlen</span> <span class="o">&gt;</span> <span class="n">size_px_max</span><span class="p">:</span>
            <span class="n">downscale_factor</span> <span class="o">=</span> <span class="n">size_px_max</span> <span class="o">/</span> <span class="n">maxlen</span>
            <span class="n">h_small</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">h</span> <span class="o">*</span> <span class="n">downscale_factor</span><span class="p">)</span>
            <span class="n">w_small</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">w</span> <span class="o">*</span> <span class="n">downscale_factor</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">h_small</span> <span class="o">=</span> <span class="n">h</span>
            <span class="n">w_small</span> <span class="o">=</span> <span class="n">w</span>

        <span class="c1"># don&#39;t go below Hx1 or 1xW</span>
        <span class="n">h_small</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">h_small</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">w_small</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">w_small</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">generator</span> <span class="o">=</span> <span class="n">OpenSimplex</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
        <span class="n">noise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">h_small</span><span class="p">,</span> <span class="n">w_small</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">sm</span><span class="o">.</span><span class="n">xrange</span><span class="p">(</span><span class="n">h_small</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">sm</span><span class="o">.</span><span class="n">xrange</span><span class="p">(</span><span class="n">w_small</span><span class="p">):</span>
                <span class="n">noise</span><span class="p">[</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">generator</span><span class="o">.</span><span class="n">noise2d</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
        <span class="n">noise_0to1</span> <span class="o">=</span> <span class="p">(</span><span class="n">noise</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="n">noise_0to1</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
            <span class="n">noise_0to1_uint8</span> <span class="o">=</span> <span class="p">(</span><span class="n">noise_0to1</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
            <span class="n">noise_0to1_3d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">noise_0to1_uint8</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">],</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
            <span class="n">noise_0to1</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">imresize_single_image</span><span class="p">(</span><span class="n">noise_0to1_3d</span><span class="p">,</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">),</span> <span class="n">interpolation</span><span class="o">=</span><span class="n">upscale_method</span><span class="p">)</span>
            <span class="n">noise_0to1</span> <span class="o">=</span> <span class="p">(</span><span class="n">noise_0to1</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

        <span class="c1">#from scipy import misc</span>
        <span class="c1">#print(noise_0to1.shape, h_small, w_small, self.size_percent, self.size_px_max, maxlen)</span>
        <span class="c1">#misc.imshow((noise_0to1 * 255).astype(np.uint8))</span>

        <span class="k">return</span> <span class="n">noise_0to1</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;SimplexNoise(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size_px_max</span><span class="p">),</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="FrequencyNoise"><a class="viewcode-back" href="../../source/imgaug.html#imgaug.parameters.FrequencyNoise">[docs]</a><span class="k">class</span> <span class="nc">FrequencyNoise</span><span class="p">(</span><span class="n">StochasticParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameter to generate noise of varying frequencies.</span>

<span class="sd">    This parameter expects to sample noise for 2d planes, i.e. for</span>
<span class="sd">    sizes (H, W) and will return a value in the range [0.0, 1.0] per location</span>
<span class="sd">    in that plane.</span>

<span class="sd">    The exponent controls the frequencies and therefore noise patterns.</span>
<span class="sd">    Low values (around -4.0) will result in large blobs. High values (around</span>
<span class="sd">    4.0) will result in small, repetitive patterns.</span>

<span class="sd">    The noise is sampled from low resolution planes and</span>
<span class="sd">    upscaled to the requested height and width. The size of the low</span>
<span class="sd">    resolution plane may be defined (high values can be slow) and the</span>
<span class="sd">    interpolation method for upscaling can be set.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    exponent : number or tuple of numbers of list of numbers or StochasticParameter, optional(default=(-4, 4))</span>
<span class="sd">        Exponent to use when scaling in the frequency domain.</span>
<span class="sd">        Sane values are in the range -4 (large blobs) to 4 (small patterns).</span>
<span class="sd">        To generate cloud-like structures, use roughly -2.</span>
<span class="sd">            * If number, then that number will be used as the exponent for all</span>
<span class="sd">              iterations.</span>
<span class="sd">            * If tuple of two numbers (a, b), then a value will be sampled</span>
<span class="sd">              per iteration from the range [a, b].</span>
<span class="sd">            * If a list of numbers, then a value will be picked per iteration</span>
<span class="sd">              at random from that list.</span>
<span class="sd">            * If a StochasticParameter, then a value will be sampled from</span>
<span class="sd">              that parameter per iteration.</span>

<span class="sd">    size_px_max : int or tuple of ints or list of ints or StochasticParameter, optional(default=(4, 16))</span>
<span class="sd">        The frequency noise is generated in a low resolution environment.</span>
<span class="sd">        This parameter defines the maximum size of that environment (in</span>
<span class="sd">        pixels). The environment is initialized at the same size as the input</span>
<span class="sd">        image and then downscaled, so that no side exceeds `size_px_max`</span>
<span class="sd">        (aspect ratio is kept).</span>
<span class="sd">            * If int, then that number will be used as the size for all</span>
<span class="sd">              iterations.</span>
<span class="sd">            * If tuple of two ints (a, b), then a value will be sampled</span>
<span class="sd">              per iteration from the discrete range [a..b].</span>
<span class="sd">            * If a list of ints, then a value will be picked per iteration at</span>
<span class="sd">              random from that list.</span>
<span class="sd">            * If a StochasticParameter, then a value will be sampled from</span>
<span class="sd">              that parameter per iteration.</span>

<span class="sd">    upscale_method : None or ia.ALL or string or list of string or StochasticParameter, optional(default=None)</span>
<span class="sd">        After generating the noise maps in low resolution environments, they</span>
<span class="sd">        have to be upscaled to the input image size. This parameter controls</span>
<span class="sd">        the upscaling method.</span>
<span class="sd">            * If None, then either &#39;nearest&#39; or &#39;linear&#39; or &#39;cubic&#39; is picked.</span>
<span class="sd">              Most weight is put on linear, followed by cubic.</span>
<span class="sd">            * If ia.ALL, then either &#39;nearest&#39; or &#39;linear&#39; or &#39;area&#39; or &#39;cubic&#39;</span>
<span class="sd">              is picked per iteration (all same probability).</span>
<span class="sd">            * If string, then that value will be used as the method (must be</span>
<span class="sd">              &#39;nearest&#39; or &#39;linear&#39; or &#39;area&#39; or &#39;cubic&#39;).</span>
<span class="sd">            * If list of string, then a random value will be picked from that</span>
<span class="sd">              list per iteration.</span>
<span class="sd">            * If StochasticParameter, then a random value will be sampled</span>
<span class="sd">              from that parameter per iteration.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; param = FrequencyNoise(exponent=-2, size_px_max=(16, 32), upscale_method=&quot;linear&quot;)</span>

<span class="sd">    Generates noise with cloud-like patterns.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exponent</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">size_px_max</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span> <span class="n">upscale_method</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;linear&quot;</span><span class="p">,</span> <span class="s2">&quot;nearest&quot;</span><span class="p">]):</span> <span class="c1"># pylint: disable=locally-disabled, dangerous-default-value, line-too-long</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exponent</span> <span class="o">=</span> <span class="n">handle_continuous_param</span><span class="p">(</span><span class="n">exponent</span><span class="p">,</span> <span class="s2">&quot;exponent&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size_px_max</span> <span class="o">=</span> <span class="n">handle_discrete_param</span><span class="p">(</span><span class="n">size_px_max</span><span class="p">,</span> <span class="s2">&quot;size_px_max&quot;</span><span class="p">,</span> <span class="n">value_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">upscale_method</span> <span class="o">==</span> <span class="n">ia</span><span class="o">.</span><span class="n">ALL</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span> <span class="o">=</span> <span class="n">Choice</span><span class="p">([</span><span class="s2">&quot;nearest&quot;</span><span class="p">,</span> <span class="s2">&quot;linear&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;cubic&quot;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">ia</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span> <span class="o">=</span> <span class="n">Deterministic</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">all</span><span class="p">([</span><span class="n">ia</span><span class="o">.</span><span class="n">is_string</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">upscale_method</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span> <span class="o">=</span> <span class="n">Choice</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">,</span> <span class="n">StochasticParameter</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span> <span class="o">=</span> <span class="n">upscale_method</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Expected upscale_method to be string or list of strings or StochasticParameter, got </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">upscale_method</span><span class="p">),))</span>

    <span class="k">def</span> <span class="nf">_draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">random_state</span><span class="p">):</span>
        <span class="c1"># code here is similar to:</span>
        <span class="c1">#   http://www.redblobgames.com/articles/noise/2d/</span>
        <span class="c1">#   http://www.redblobgames.com/articles/noise/2d/2d-noise.js</span>

        <span class="n">ia</span><span class="o">.</span><span class="n">do_assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Expected requested noise to have shape (H, W), got shape </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">size</span><span class="p">,))</span>

        <span class="n">seed</span> <span class="o">=</span> <span class="n">random_state</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span>

        <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">size</span>
        <span class="n">maxlen</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="n">size_px_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size_px_max</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">maxlen</span> <span class="o">&gt;</span> <span class="n">size_px_max</span><span class="p">:</span>
            <span class="n">downscale_factor</span> <span class="o">=</span> <span class="n">size_px_max</span> <span class="o">/</span> <span class="n">maxlen</span>
            <span class="n">h_small</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">h</span> <span class="o">*</span> <span class="n">downscale_factor</span><span class="p">)</span>
            <span class="n">w_small</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">w</span> <span class="o">*</span> <span class="n">downscale_factor</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">h_small</span> <span class="o">=</span> <span class="n">h</span>
            <span class="n">w_small</span> <span class="o">=</span> <span class="n">w</span>

        <span class="c1"># don&#39;t go below Hx4 or 4xW</span>
        <span class="n">h_small</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">h_small</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="n">w_small</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">w_small</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

        <span class="c1"># generate random base matrix</span>
        <span class="n">wn_r</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">h_small</span><span class="p">,</span> <span class="n">w_small</span><span class="p">)</span>
        <span class="n">wn_a</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">h_small</span><span class="p">,</span> <span class="n">w_small</span><span class="p">)</span>

        <span class="n">wn_r</span> <span class="o">=</span> <span class="n">wn_r</span> <span class="o">*</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">h_small</span><span class="p">,</span> <span class="n">w_small</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">wn_a</span> <span class="o">=</span> <span class="n">wn_a</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>

        <span class="n">wn_r</span> <span class="o">=</span> <span class="n">wn_r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">wn_a</span><span class="p">)</span>
        <span class="n">wn_a</span> <span class="o">=</span> <span class="n">wn_r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">wn_a</span><span class="p">)</span>

        <span class="c1"># pronounce some frequencies</span>
        <span class="n">exponent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exponent</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">3</span><span class="p">))</span>
        <span class="c1"># this has some similarity with a distance map from the center, but looks a bit more like a cross</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_distance_matrix</span><span class="p">((</span><span class="n">h_small</span><span class="p">,</span> <span class="n">w_small</span><span class="p">))</span>
        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># necessary to prevent -inf from appearing</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">f</span> <span class="o">**</span> <span class="n">exponent</span>
        <span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">tr</span> <span class="o">=</span> <span class="n">wn_r</span> <span class="o">*</span> <span class="n">scale</span>
        <span class="n">ti</span> <span class="o">=</span> <span class="n">wn_a</span> <span class="o">*</span> <span class="n">scale</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fmin = 1</span>
<span class="sd">        Fmax = 64</span>
<span class="sd">        tr = np.zeros(wn_r.shape, dtype=np.float32)</span>
<span class="sd">        ti = np.zeros(wn_r.shape, dtype=np.float32)</span>
<span class="sd">        for i in range(h_small):</span>
<span class="sd">            for j in range(w_small):</span>
<span class="sd">                if i==0 and j==0:</span>
<span class="sd">                    continue</span>
<span class="sd">                f1 = min(i, h_small-i)</span>
<span class="sd">                f2 = min(j, w_small-j)</span>
<span class="sd">                f = np.sqrt(f1**2 + f2**2)</span>
<span class="sd">                #scale = (Fmin &lt;= f &lt;= Fmax) * (f**(2*-2))</span>
<span class="sd">                scale = (f**(2*-2))</span>
<span class="sd">                x = wn_r[i, j] * scale</span>
<span class="sd">                y = wn_a[i, j] * scale</span>
<span class="sd">                tr[i, j] = x</span>
<span class="sd">                ti[i, j] = y</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wn_freqs_mul</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">tr</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">complex</span><span class="p">)</span>
        <span class="n">wn_freqs_mul</span><span class="o">.</span><span class="n">real</span> <span class="o">=</span> <span class="n">tr</span>
        <span class="n">wn_freqs_mul</span><span class="o">.</span><span class="n">imag</span> <span class="o">=</span> <span class="n">ti</span>

        <span class="n">wn_inv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">ifft2</span><span class="p">(</span><span class="n">wn_freqs_mul</span><span class="p">)</span><span class="o">.</span><span class="n">real</span>

        <span class="c1"># normalize to 0 to 1</span>
        <span class="n">wn_inv_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">wn_inv</span><span class="p">)</span>
        <span class="n">wn_inv_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">wn_inv</span><span class="p">)</span>
        <span class="n">noise_0to1</span> <span class="o">=</span> <span class="p">(</span><span class="n">wn_inv</span> <span class="o">-</span> <span class="n">wn_inv_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">wn_inv_max</span> <span class="o">-</span> <span class="n">wn_inv_min</span><span class="p">)</span>

        <span class="c1"># upscale from low resolution to image size</span>
        <span class="n">upscale_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span><span class="o">.</span><span class="n">draw_sample</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">new_random_state</span><span class="p">(</span><span class="n">seed</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">noise_0to1</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="p">(</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">noise_0to1_uint8</span> <span class="o">=</span> <span class="p">(</span><span class="n">noise_0to1</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
            <span class="n">noise_0to1_3d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">noise_0to1_uint8</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">],</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
            <span class="n">noise_0to1</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">imresize_single_image</span><span class="p">(</span><span class="n">noise_0to1_3d</span><span class="p">,</span> <span class="p">(</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">interpolation</span><span class="o">=</span><span class="n">upscale_method</span><span class="p">)</span>
            <span class="n">noise_0to1</span> <span class="o">=</span> <span class="p">(</span><span class="n">noise_0to1</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">noise_0to1</span>

    <span class="k">def</span> <span class="nf">_create_distance_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">size</span>
        <span class="k">def</span> <span class="nf">freq</span><span class="p">(</span><span class="n">yy</span><span class="p">,</span> <span class="n">xx</span><span class="p">):</span>
            <span class="n">f1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">yy</span><span class="p">,</span> <span class="n">h</span><span class="o">-</span><span class="n">yy</span><span class="p">)</span>
            <span class="n">f2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">w</span><span class="o">-</span><span class="n">xx</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">f1</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">f2</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">scipy</span><span class="o">.</span><span class="n">fromfunction</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;FrequencyNoise(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exponent</span><span class="p">),</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size_px_max</span><span class="p">),</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">upscale_method</span><span class="p">)</span>
        <span class="p">)</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Alexander Jung.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.2.6',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>